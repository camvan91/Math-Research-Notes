\documentclass[]{article}
\input{../mathdoc}
\input{../mathsym}
\input{../theorem}
%\input{../preview}

\author{Presenter: Maya Chhetri, Notes by Michael Reed, Book: Walter Rudin 3rd}
\title{Mathematical Analysis}
%date{}

\begin{document}
\maketitle

%\begin{abstract}
%\end{abstract}

%\ul{Chapter 3 continued}: 

\begin{recall}
	[Cauchy product] $\sum_{n=0}^\infty a_n$, $\sum_{n=0}^\infty b_n$, then Cauchy product series is:
	$\sum_{n=0}^\infty c_n$, 
	$$c_n = \sum_{k=0}^n a_kb_{n-k} = a_0b_n + a_1b_{n-1} + \dots + a_nb_0.$$
\end{recall}

\begin{theorem}
	\label{thm-3-50}
	Suppose
	\begin{enumerate}
		\item[(a)] $\sum_{n=0}^\infty a_n$ converges absolutely;
		\item[(b)] $\sum_{n=0}^\infty a_n = A$
		\item[(c)] $\sum_{n=0}^\infty b_n = B$
		\item[(d)] $c_n: = \sum_{k=0}^n a_kb_{n-k}$.
	\end{enumerate}
	Then $\sum_{n=0}^\infty c_n$ converges to $AB$.
\end{theorem}
\begin{proof}
	Define sequence of partial sums $A_n:= \sum_{k=0}^n a_k$, $B_n:=\sum_{k=0}^nb_k$, $C_n:=\sum_{k=0}^n c_k$.
	By assumption: $A_n\lra A$ and $B_n\lra B$.
	\ul{Want to show}: $C_n\lra AB$.
	Then 
	\begin{align*}
		C_n&:=\sum_{k=0}^nc_k = c_0+c_1+c_2+\dots+c_n \\
		   &= a_0b_0+(a_0b_1+a_1b_0) + (a_0b_2+a_1b_1+a_2b_0) + \dots + (a_0b_n + a_1b_{n-1}+\dots+a_nb_0) \\
		   &= a_0(\ob{B_n}{b_0 + b_1+\dots+b_n}) + a_1(\ob{B_{n-1}}{b_0+\dots+b_{n-1}}) + a_2(\ob{B_{n-2}}{b_0+\dots+b_{n-2}}) + \dots + a_n\ob{B_0}{b_0} \\
		   &= a_0B_n + a_1b_{n-1} + a_2B_{n-2} + \dots + a_nB_0 
		   = a_0(\beta_n+B) + a_1(\beta_{n-1}+B) + \dots + a_n(\beta_0 + B) \\
		   &= (\ub{A_n}{a_0+a_1+\dots+a_n})B + a_0\beta_n + a_1\beta_{n-1} + \dots + a_n\beta_0 \lra AB
	\end{align*}
	if $a_0\beta_n+a_1\beta_{n-1}+\dots+a_n\beta_0\ra 0$ as $n\ra\infty$, where $\beta_n = B_n-B$ and $B_n=\beta_n+B$.
	
	Let $\gamma_n:= \alpha_0\beta_n + \alpha_1\beta_{n-1} + \dots + a_n\beta_0$.
	\ul{Fix $\epsilon>0$}. \ul{\ul{NTS}}: $\exists N\in\mb N$ such that $|\gamma_n|<\epsilon$ for all $n\geq N$.
	Since $\sum a_n$ converges absolutely, $\alpha:= \sum_{n=0}^\infty |a_n|\in\mb R$.
	Then $|\gamma_n|=|a_0\beta_n + a_1\beta_{n-1} + \dots + a_n\beta_0|$.
	Since $\beta_n\lra 0$ as $n\ra\infty$, $\exists N_1\in\mb N$ such that $|\beta_n|<\epsilon$ for all $n\geq N_1$.
	For $n\geq N_1$,
	\begin{align*}
		|\gamma_n|&=|a_0\beta_n+\dots+a_{n-N_1-1}\beta_{N_1+1} + a_{n-N_1}\beta_{N_1} + \dots + a_n\beta_0| \\
				  &\os{\Delta}{\leq} |a_0\beta_n + \dots + a_{n-N_1-1}\beta_{N_1+1}| + |a_{n-N_1}\beta_{N_1} + \dots + a_n\beta_0| \\
				  &\os{\Delta}{\leq} |a_0|\os{<\epsilon}{|\beta_n|}+|a_1|\os{<\epsilon}{|\beta_{n-1}|}+\dots + |a_{n-N_1-1}|\os{<\epsilon}{|\beta_{N_1+1}|} + |a_{n-N_1}\beta_{N_1} + \dots + a_n\beta_0| \\
				  &< \epsilon \ub{<\alpha}{\sum_{k=0}^{n-N_1-1} |a_k|} + |a_{n-N_1}\beta_{N_1} + \dots + a_n\beta_0| 
				  < \epsilon\alpha + |a_{n-N_1}\beta_{N_1} + \dots + a_n\beta_0|
	\end{align*}
	Keep $N_1$ fixed.
	Letting $n\ra\infty$ and noting that $a_i\ra0$ as $i\ra\infty$, we get $\lim_{n\ra\infty} |\gamma_n|\leq\epsilon\alpha$.
	Since $\alpha>0$ is fixed and $\epsilon>0$ is arbitrary, $\lim_{n\ra\infty} |\gamma_n| = 0$.
\end{proof}

\begin{theorem}
	\label{thm-3-51}
	If $\sum a_n = A$, $\sum b_n = B$, $\sum c_n=C$, where $c_n=\sum_{k=0}^n a_kb_{n-k}$.
	Then $C=AB$.
\end{theorem}
\begin{proof}
	-- In Chapter 8.
\end{proof}

\subsection*{Rearrangement of an infinite series}

$\sum a_n$ is $\sum a_n'$, where $a_n'=a$ where $k_n$ is a bijection from $\mb N$ to $\mb N$.
\begin{example}
	$a_1\ a_2\ a_3\ a_4\ a_5\ a_6\ a_7\ \cdots$, 
	
	$a_1\ a_3\ a_2\ a_5\ a_7\ a_4\ \cdots$ (rearrangement),
	
	$a_1\ a_3\ a_5\ a_7\ \cdots\ a_{2n+1}\ \cdots\ a_2\ a_4\ a_6\ a_8\ \cdots$ (not a rearrangement).
\end{example}
\begin{example}
	Alternating harmonic series: $\sum_{n=1}^\infty (-1)^{n-1}\frac1n = 1-\frac12+\frac13-\frac14+\frac15-\dots = \ln 2$.
	
	Rearrange: 2 odd terms followed by even term $1+\frac13-\frac12+\frac15+\frac17-\frac14+\frac19+\frac1{11}-\frac16+\dots$.
	
	\ul{\ul{Show}}: Sum of rearranged series is $\frac32\ln2$.
	$$\ln 2 = 1-\frac12+\frac13-\frac14+\frac15-\frac16+\frac17-\frac18+\dots.$$
	Multiply by $\frac12$:
	$$\frac{\ln2}{2} = 0+\frac12+0-\frac14+0+\frac16+0+\dots.$$
	Add the two above:
	$$ \frac32\ln2 = 1+0+\frac13-\frac12 + \frac15 + \frac17-\frac14+\dots,$$
	so rearranged series sum is $\frac32\ln 2$.
\end{example}

\begin{theorem}
	Suppose $\sum a_n$ converge absolutely.
	Then \ul{every} rearrangement $\sum a_n'$ of $\sum a_n$ converges, and they all converge to the same sum.
\end{theorem}
\begin{proof}
	Let $\sum a_n'$ be a rearrangement of $\sum a_n$.
	Let $s_n$ and $s_n'$ be sequences of partial sums of $\sum a_n$ and $\sum a_n'$ respectively.
	Also $s_n\lra s$ (say). \ul{\ul{NTS}}: $s_n'\ra s$.
	Let $\epsilon>0$ be fixed.
	\ul{NTS}: $\exists N\in\mb N$ such that $|s_n'-s|<\epsilon$ for all $n\geq N$.
	Now, 
	\begin{align*}
		|s_n'-s|&=|s_n'-s_n+s_n-s| \\
				&\leq |s_n'-s_n|+|s_n-s|
	\end{align*}
	Since $\sum a_n$ converges absolutely, $\exists N_2\in\mb N$ such that $m\geq n>N_2$
	$$\sum_{i=n}^m |a_i| < \frac\epsilon2.$$
	Choose $p\in\mb N$ such that $\set{1,2,\dots,N_2}\subset\set{k_1,\dots,k_p}$.
	Then for $n>p$
	\begin{align*}
		|s_n'-s_n| &= |(a_1'+a_2'+\dots+a_n')-(a_1+a_2+\dots+a_n)| &\qquad \text{-- \ul{cancel terms}} \\
				  &\leq \sum_{i=n}^{m} |a_i| < \frac\epsilon2
	\end{align*}
\end{proof}

\section*{Continuity}

\ul{From Calculus}: let $f:\mb R\ra\mb R$ such that $f$ may not be  defined at $p$, then $$\lim_{x\ra p} f(x) = q \iff \forall\epsilon>0,\exists \delta=\delta(\epsilon,p)>0: (0<|x-p|<\delta \implies |f(x)-q|<\epsilon).$$
$f$ is continuous at $p\in\mb R$ if $\lim_{x\ra p} f(x) = f(p)$ if and only if $\forall\epsilon>0,\exists\delta=\delta(\epsilon,p)>0$ such that $\forall x\in\mb R$ with $|x-p|<\delta$ implies $|f(x)-f(p)|<\epsilon$.
\ul{In metric spaces}: Let $f:E\subset(X,d_X)\ra(Y,d_Y)$.
\begin{definition}
	[Limit] Let $p\in E'$. We say $\lim_{x\ra p} f(x) = q$ if and only if $\forall \epsilon>0,\exists\delta=\delta(\epsilon,p)>0$ such that $\forall x\in E$ with $0<d_X(x,p)<\delta$ implies $d_Y(f(x),q) < \epsilon$.
	So $$X\supset E\supset B_\delta(p) \os{f}{\lra} f(B_\delta(p))\subset Y.$$
\end{definition}

Alternative definition of limit.

\begin{theorem}
	Let $f:E\subset(X,d_X)\ra(Y,d_Y)$ and $p\in E'$.
	Then $\lim_{x\ra p} f(x)=q \iff \lim_{n\ra\infty} f(x_n) = q$ for every sequence $\set{x_n}\subset E$ with $x_n\neq p$ and $x_n\ra p$.
\end{theorem}
\begin{proof}
	\say{$\implies$} Suppose $\lim_{x\ra p} f(x) = q$. Let $\set{x_n}\subset E$ such that $x_n\neq p$ and $x_n\ra p$.
	\ul{\ul{NTS}}: $\lim_{n\ra\infty} f(x_n) = p$.
	Let $\epsilon>0$ be fixed. 
	(NTF: $N\in\mb N$ such that $d_Y(f(x_n),q)<\epsilon$ for all $n>N$).
	Since $x_n\ra p \implies \exists N\in\mb N$ such that $d_X(x_n,p)<\delta$ for $n>N$.
	Since $\lim_{x\ra p} f(x) = q$, $\exists\delta=\delta(\epsilon,p)>0$ such that $\forall x\in E,x\neq p$ then $0<d_X(x,p)<\delta\implies d_Y(f(x),q)<\epsilon$.
	Therefore, for $n>N$, $d_x(x_n,p)<\delta$ which implies $d_Y(f(x_n),q)<\epsilon \implies \lim_{n\ra\infty}f(x_n)=q$.

	\say{$\Lla$} Let $\lim_{n\ra\infty} f(x_n) = q$ for \ul{every} sequence $\set{x_n}\subset E$, $x_n\neq p$ and $x_n\ra p$.
	Suppose by contradiction that: $\lim_{x\ra p} f(x)\neq q$.
	This means, $\exists\epsilon>0$ such that \ul{$\forall\delta>0$}, $\exists x_\delta\in E$ such that $0<d_X(x_\delta,p)<\delta$ but $d_Y(f(x),q)\geq \epsilon$.
	Taking $\delta_n = \frac1n$ and $x_n = x_{\delta_n}$, we see $x_{\delta_n}\ra p$ but $d_Y(f(x_{\delta_n}),q)\geq\epsilon$, contradicting $\lim_{n\ra\infty} f(x_n)=q$ for every sequence $\set{x_n}\subset E$ such that $x_n\ra p$.
\end{proof}

\ul{Limit properties}: Let $f,g:E\subset(X,d_X)\ra(\mb C,|\cdot|_\mb C)$.
Then if $\lim_{x\ra p} f(x) = A$, $\lim_{x\ra p} g(x) = q$, $p\in E'$,
\begin{enumerate}
	\item $\lim_{x\ra p} (f+g)(x) = A+B$
	\item $\lim_{x\ra p} (f\cdot g)(x) = A\cdot B$ (Inner product if $\mb C$ replaced by $\mb R^k$)
	\item $\lim_{x\ra p} \left(\frac fg\right) = \frac AB$.
\end{enumerate}

\subsection*{Continuity}
\begin{definition}
	Suppose $f:E\subset (X,d_X) \ra (Y,d_Y)$ and $p\in E$.
	We way $f$ is continuous at $p$ if and only if $\forall\epsilon>0,\exists\delta = \delta(\epsilon,p) > 0$ such that $\forall x\in E$ with $d_X(x,p)<\delta \implies d_Y(f(x),f(p))<\epsilon$.
	\ul{Notes}:	
\end{definition}
\begin{itemize}
	\item Continuity is a pointwise property.
	\item $f$ is continuous \ul{on $E$} if $f$ is continuous at every $p\in E$.
	\item $f$ is continuous at an isolated point $p\in E$.
\end{itemize}
\begin{example}
	Fix $\epsilon>0$. Then $d_X(p,p)=0<\delta$ such that $N_\delta(p)\bs\set p=\emptyset \implies d_Y(f(p),f(p))= 0<\epsilon$.
\end{example}

\begin{theorem}
	Suppose $f:(X,d_X)\ra(Y,d_Y)$ is continuous on $X \iff f\inv(V) = \setc{x\in X}{f(x)\in V}$ is open in $X$ for every open set $V\subset Y$.
\end{theorem}
\begin{proof}
	\say{$\implies$} Suppose $f$ is continuous on $X$. Let $V\subset Y$ be open.
	\ul{\ul{NTS}}: $f\inv(V)$ is open in $X$.
	Let $p\in f\inv(p)$.
	\ul{\ul{NTS}}: $\exists\delta>0$ such that $B_\delta(p)\subset f\inv(V)$.
	Since $p\in f\inv(V)$, $f(p)\in V$.
	So $V$ open $\implies\exists\epsilon>0$ such that $B_\epsilon(f(p))\subset V$.
	Since $f$ is continuous, $\exists\delta=\delta(\epsilon,p)>0$ such that $f(B_\delta(p))\subset B_\epsilon(f(p))\subset V \implies B_\delta(p)\subset f\inv(V) \implies p$ is an interior point of $f\inv(V) \implies f\inv(V)$ is open.

	\say{$\Lla$} Let $p\in X$ and $\epsilon>0$ be given.
	\ul{NTS}: $\exists\delta=\delta(p,\epsilon)>0$ such that for $x\in X$ with $d_X(x,p)<\delta$ implies $d_Y(f(p),f(x))<\epsilon$.
	Let $v:=B_\epsilon(f(p))\subset Y$. Then $V$ is open. Therefore, $f\inv(V)$ is open in $X$ and $p\in f\inv(V)$.
	Since $f\inv(V)$ is open, $p$ is an interior point. So $\exists\delta>0$ such that $B_\delta(p)\subset f\inv(V) \implies f(B_\delta(p))\subset V = B_\epsilon(f(p)) \implies f$ continuous on $X$ since $p\in X$ is arbitrary.
\end{proof}
\begin{corollary}
	$f:(X,d_X)\ra(Y,d_Y)$ is continuous $\iff f\inv(W)$ is closed in $X$ for every closed set $W$ in $Y$.
\end{corollary}
\begin{proof}
	Notice that 
	\begin{itemize}
		\item $W$ closed $\iff V=W^c$ open.
		\item $f$ continuous on $X\iff f\inv(V)$ is open $\iff [f\inv(V)]^c \os?= f\inv(V^c)$ is closed, with $V^c=W$.
	\end{itemize}
	\ul{Enough to show}: $[f\inv(V)]^c = f\inv(V^c)$ (for any $V$).
	Let $x\in[f\inv(V)]^c$. This means $x\notin f\inv(V) \iff f(x)\notin V \iff f(x)\in V^c \iff x\in f\inv(V^c)$.
\end{proof}
\begin{remark}
	Topological properties preserved under continuous mapping in one or other direction.
	\begin{enumerate}
		\item[(i)] $f(\text{compact})= $ compact
		\item[(ii)] $f(\text{connected}) = $ connected
		\item[$\checkmark$(iii)] $f\inv(\text{open}) = $ open
		\item[$\checkmark$(iv)] $f\inv(\text{closed}) = $ closed
	\end{enumerate}
\end{remark}
\begin{remark}
	\ul{Not necessarily true}
	\begin{enumerate}
		\item[(i)] $f(\text{open}) \neq $ open
		\item[(ii)] $f(\text{closed}) \neq $ closed
		\item[(iii)] $f\inv(\text{compact}) \neq $ compact
		\item[(iv)] $f\inv(\text{connected}) \neq $ connected
		\item[(v)] $f(\text{bounded}) \neq $ bounded
		\item[(vi)] $f\inv(\text{bounded}) \neq $ bounded.
	\end{enumerate}
\end{remark}
\begin{example}
	\begin{enumerate}
		\item[(i)] $f(\text{open}) \neq $ open
			\begin{enumerate}
				\item[(a)] constant function.
				\item[(b)] $f:\mb R\ra\mb R$ by $f(x) = \frac1{1+x^2}$.
					$U = (-1,1)\subset\mb R$ open but $f(U) = (\frac12,1]$ not open.
			\end{enumerate}
		\item[(ii)] $W = [0,\infty)$ closed in $\mb R$ but $f(W) = (0,1]$ not closed.
	\end{enumerate}
\end{example}

\begin{theorem}
	\label{thm-4-7}
	$(X,d_X),(Y,d_Y),(Z,d_Z)$ -- metric spaces.
	If $f:X\ra Y$ is continuous at $p\in X$, and $g:f(X)\ra Z$ is continuous at $f(p)$, then $(g\circ f): X\ra Z$ is continuous at $p$.
	$ X\ni p \os f\lra f(p)\in Y$ and $X\ni p \os{g\circ f}\lra g(f(p))\in Z \os g\lla f(p)\in Y$.
\end{theorem}
\begin{proof}
	Let $p\in X$ and $\epsilon>0$ be fixed.
	Since $g$ is continuous at $f(p)$, $\exists\eta>0$ such that $g(B_\eta(f(p)))\subset B_\epsilon(g(f(p)))$.
	Since $f$ is continuous at $p$, $\exists\delta>0$ such that $f(B_\delta(p))\subset B_\eta(f(p))$.
	Therefore, $g(f(B_\delta(p)))\subset B_\epsilon(g(f(p)))$.
	Hence $g\circ f$ is continuous at $p$.
\end{proof}

\begin{theorem}
	\label{thm-4-9}
	$f,g:(X,d_X)\os{\text{continuous}}{\lra}\mb C$.
	Then $f+g,f\cdot g,f/g$ (whenever well defined) are continuous.
\end{theorem}
\begin{proof}
	skip.
\end{proof}
\begin{theorem}
	\label{thm-4-10}
	$\vf:(X,d_X)\ra\mb R^k$ with $k\geq 1$ defined by $\vf(x) = (f_1(x),f_2(x),\dots,f_k(x))$; $x\in X$, where $f_i:X\ra\mb R$ for $i=1,2,\dots,k$.
	\begin{enumerate}
		\item[(a)] $\vf$ is continuous on $X \iff$ each $f_i$ is continuous on $X$.
		\item[(b)] if $\vf$ and $\vg$ are continuous on $X$, then $\ub{\text{vector-valued}}{\vf+\vg}$ and $\ub{\text{real-valued}}{\vf\cdot\vg} (\ra$ inner product) are continuous on~$X$.
	\end{enumerate}
\end{theorem}

\begin{recall}
	[Compacat set]
	\begin{enumerate}
		\item[(i)] $E\subset(X,d_X)$ is compact if every open cover $\set{V_\alpha}_\alpha$ of $E$ has a finite subcover.
		\item[(ii)] $E$ is compact if for every sequence $\set{x_n}\subset E$, $\exists$ a convergent subsequence $\set{x_{n_k}}$.
	\end{enumerate}
\end{recall}
\begin{theorem}
	\label{thm-4-14}
	Let $(X,d_X)$ be compact and $f:(X,d_X)\ra(Y,d_Y)$ continuous.
	Then $f(X)$ is compact.
\end{theorem}
\begin{proof}
	Let $\set{y_n}\subset f(X)$ be a sequence.
	Then for each $n\in N$, $\exists \ul{x_n\in X}$ such that $f(x_n)=y_n$.
	Then $X$ compact and $\set{x_n}\subset X$ implies that $\exists\set{x_{n_k}}\subset\set{x_n}$ such that $x_{n_k}\lra x^*$ for some $x^*\in X$.
	Then $f$ continuous $\implies f(x_{n_k}) \lra f(x^*)\in f(X)$ i.e., $\exists$ a convergent subsequence $\set{y_{n_k}} = \set{f(x_{n_k})}\subset f(X)$.
	So $f(X)$ must be compact.
\end{proof}

\newpage

\begin{recall}
	[Theorem \ref{thm-4-14}] Let $(X,d_X),(Y,d_Y)$ be metric spaces, then $f:X\us{\text{cts}}{\os{\text{compact}}{\lra}} Y \implies f(x)$ is compact.
\end{recall}
\begin{theorem}
	\label{thm-4-15}
	$f:X^\text{compact}\us{\text{cts}}{\lra} Y \implies f(x)$ is closed + bounded.
\end{theorem}
\begin{proof}
	Every compact set is closed + bounded. By Thm \ref{thm-4-14}, $f(x)$ is compact and hence closed + bounded.
\end{proof}
\begin{theorem}
	[Extreme Value Theorem]
	Let $f:X^\text{compact} \lra \mb R$ be continuous.
	Then $f$ \ul{attains} both maximum and minimum on $X$ i.e., $\exists p,q\in X$ such that $\ds f(p)=\sup_{x\in X} f(x)$ and $\ds f(q) = \inf_{x\in X} f(x)$.
\end{theorem}
\begin{proof}
	By Theorem \ref{thm-4-14} and Theorem \ref{thm-4-15}, $f(x)$ is closed and bounded.
	Since $f(x)\subset\mb R$ is bounded and $\mb R$ has l.u.b. property, $\inf_{x\in X} f(x)\in\mb R$ and $\sup_{x\in X}f(x)\in\mb R$.
	Now, $f(x)$ is closed in $\mb R$, so $p,q\in X$ such that $f(p) = \sup_{x\in X}f(x)$ and $f(q) = \inf_{x\in X}f(x)$.
\end{proof}

\begin{definition}
	[Homeomorphism] $f:X\ra Y$ is a homeomorphism if the following holds:
	\begin{enumerate}
		\item $f$ is bijective (1-1 and onto)
		\item $f$ is continuous on $X$
		\item $f\inv$ is continuous on $Y$
	\end{enumerate}
\end{definition}

\begin{theorem}
	If $X$ is compact and $X$ is homemorphic to $Y$, then $Y$ is compact.
\end{theorem}
\begin{proof}
	$X$ homeomorphic to $Y$ means that $\exists$ a homeomorphism $f$ from $X$ to $Y$.
	Moreover $f(X) = Y$. By Theorem \ref{thm-4-14}, $f(X)=Y$ is compact.
\end{proof}

\begin{definition}
	[inverse mapping] Suppose $f:X\ra Y$ is bijective. Then the inverse mapping $f\inv:Y\ra X$ is defined by $f\inv(f(x)) = x$ for all $x\in X$.
\end{definition}

\begin{theorem}
	\label{thm-4-17}
	Let $f:X^\text{\ul{compact}}\ra Y$ is \ul{bijective} and \ul{continuous}.
	Then $f\inv:Y\ra X$ is continuous.
\end{theorem}
\begin{proof}
	We will show $f(v)$ is open in $Y$ for any open set $V$ in $X$.
	Let $V\subset X$ be open.
	Then $V^c\subset X$ is closed and hence compact since $X$ is compact.
	Since $f$ is continuous, $f(V^c)$ is compact in $Y$.
	Then $f(V) \us{\text{HW}}{\os?=} [f(V^c)]^c$ and hence open since $f(V^c)$ is closed.
	Hence $f\inv$ is continuous on $Y$.
\end{proof}

Compactness and \ul{uniform continuity}.
\begin{recall}
	$f:X\ra Y$. $f$ is continuous at $\ul{\ul{p}}\in X$ if and only if $\forall\ul{\ul{\epsilon}}>0$, $\ul{\exists\delta = \delta(p,\epsilon)}>0$ such that \ul{for all $x\in X$} with $d_X(x,p)<\delta$ implies $d_Y(f(x),f(p))<\epsilon$. 
	-- pointwise concept ($p$ dependent)
\end{recall}
\begin{definition}
	[Uniform continuity]
	$f:X\ra Y$ is uniformly continuous \ul{on $X$} if and only if $\forall\epsilon>0$, $\exists\delta=\delta(\epsilon)>0$ such that \ul{for all $x,p\in X$} with $d_X(x,p)<\delta$ implies $d_Y(f(x),f(p))<\epsilon$.
\end{definition}
\begin{example}
	$f:\mb R\ra\mb R$ defined by $f(x) = x^2$ is continuous on $\mb R$.
\end{example}
\begin{proof}
	Let $p\in\mb R$ and $\epsilon>0$ be fixed.
	\ul{NTS}: $\exists\delta=\delta(p,\epsilon)>0$ such that for any $x\in R$ with $|x-p|<~\delta\implies |f(x)-f(p)|<\epsilon$.
	\ul{Now}, $|f(x)-f(p)| = |x^2-p^2| = |x-p|\,|x+p|$.
	Take $|x-p|< 1$ (this is not $\delta$ yet).
	Then $\mlr{|x|-|p|}\leq|x-p|<1 \implies -1 < |x|-|p|<1 \implies |x| < 1+|p|$.
	Therefore, $|x+p|\os\Delta\leq|x|+|p| < 1+|p|+|p| = 2|p|+1$.
	Then $|f(x)-f(p)| = |x-p|\,|x+p|<\epsilon$ if $|x-p|<\frac\epsilon{2|p|+1}$.
	Then $\delta(\epsilon,p) = \min\set{1,\frac\epsilon{2|p|+1}}$. 
	%-- $\delta$ depends on $\epsilon$ and $p$.
\end{proof}
\begin{example}
	$f:\mb R\ra\mb R$ defined by $f(x) = x^2$. Then $f$ is uniformly continuous on $[-7,7]$.
\end{example}
\begin{proof}
	Let $\epsilon>0$ be fixed.
	\ul{NTS}: $\exists \delta = \delta(\epsilon)>0$ such that $\forall x,p\in [-7,7]$ such that $|x-p|<\delta$ implies $|f(x)-f(p)|<\epsilon$.
	Then $|f(x)-f(p)| = |x^2-p^2| = |x+p|\,|x-p| \leq 14|x-p|<\epsilon$ if $|x-p|<\frac\epsilon{14}=\delta$.
\end{proof}
\begin{example}
	$f(x) = \frac1{x^2}$ is continuous on \ul{$(0,\infty)$}.
	Let $p>0$ and $\epsilon>0$ fixed. Find $\delta$.
	$f(x)-f(p) = \frac1{x^2} - \frac1{p^2} = \frac{p^2-x^2}{p^2x^2} = \frac{(p-x)(p+x)}{p^2x^2}$.
	Take $|p-x|<\frac{p^{>0}}2$. Also $$\mlr{|p|-|x|}<|p-x|<\frac p2 \implies -\frac p2 < \us{=p}{|p|}-|x| < \frac p2 \implies -\frac p2 \os{(1)}< |x|-|p| \os{(2)}< \frac p2 \implies |x|\os{(1)}>\frac p2$$ and $|x|<\frac{3p}2$ because $p>0$.
	Finish on your own. (Uniformly continuous on $[a,\infty)$ for any $a>0$).
\end{example}

\newpage

\begin{example}
	$f(x) = \frac1{x^2}$ is uniformly continuous on $[a,\infty)$ for any $a>0$.
\end{example}
\begin{proof}
	Let $a>0$ and $\epsilon>0$ be fixed.
	\ul{\ul{NTS}}: $\exists\delta=\delta(\epsilon)>0$ such that for all $x,y\in[a,\infty)$ with $|x-y|<\delta\implies |f(x)-f(y)|<\epsilon$.
	So $|f(x)-f(y)| = \mlr{\frac1{x^2}-\frac1{y^2}} = \frac{|y^2-x^2|}{x^2y^2} = \frac{|y-x|\,|y+x|}{x^2y^2} = |y-x|\cdot\plr{\frac 1{x^2y}+\frac1{xy^2}} \leq |y-x|\frac2{a^3}<\epsilon$ if $|x-y|<\frac{\epsilon a^3}2 \implies f$ uniformly continuous on $[a,\infty)$ (since $x,y\geq a\implies \frac1x,\frac1y\leq\frac1a$).
\end{proof}

\begin{theorem}
	Let $f:X^\text{compact}\os{\text{cts}}{\lra}Y$.
	Then $f$ is uniformly continuous on $X$.
\end{theorem}
\begin{proof}
	Let $\epsilon>0$ be fixed.
	\ul{\ul{NTS}}: $\exists\delta=\delta(\epsilon)>0$ such that for all $x,y\in X$ with $d_X(x,y)<\delta$ implies $d_Y(f(x),f(y))<\epsilon$.
	$(*)$ Since $f$ is continuous on $X$, for each $p\in X$, there exists $\eta(p)>0$ such that $\forall q\in X$ with $d_X(p,q)<\ul{\ul{\eta(p)}} \implies d_Y(f(p),f(q))<\frac\epsilon2$.
	For each $p\in X$, define $J(p):=\setc{q\in X}{d_X(p,q) < \frac{\eta(p)}2}$ -- neighborhood of $p$, hence open.
	Then $\set{J(p)}_{p\in X}$ is an open cover of $X$.
	Then $X$ compact $\implies \exists p_1,p_2,\dots,p_n\in X$ such that $X \subset J(p_1)\cup J(p_2)\cup\dots\cup J(p_n)$.
	Set $\delta:=\frac12\min\set{\eta(p_1),\eta(p_2),\dots,\eta(p_n)}>0$.
	Let $p,q\in X$ with $d_X(p,q)<\delta$.
	Then $p\in J(p_m)$ for some $m\in\set{1,\dots,n}$.
	This implies $$d_X(p,p_m)<\frac{\eta(p_m)}2 \leq \eta(p_m) \os{(*)}\implies d_Y(f(p),f(p_m)) < \frac\epsilon2.$$
	Also, $d_X(q,p_m) \os\Delta\leq d_X(p,q) + d_X(p,p_m) < \delta + \frac{\eta(p_m)}2 \leq \eta(p_m)$ because $\delta \leq \frac{\eta(p_m)}2$.
	$$\us{*}{\os{f\text{ cts}}\implies} \fbox{$\ds d_Y(f(q),f(p_m)) < \frac\epsilon2$}.$$
	Then $d_Y(f(p),f(q)) \leq d_Y(f(p),f(p_m)) + d_Y(f(p_m),q) < \frac\epsilon2+\frac\epsilon2 = \epsilon \implies f$ is continuous on $X$.
\end{proof}

\begin{theorem}
	[Compactness cannot be relaxed]
	\label{thm-4-20}
	Let $E\subseteq\mb R$ be a \ul{noncompact set}. Then
	\begin{enumerate}
		\item there exists a continuous function on $E$ which is not bounded.
			
			\ul{\ul{Eg}}: $f(x) = x^n$, $n\in\mb N$ on $E = \mb R$
			or $f(x) = \frac1x$ on $E = (0,1]$.
		\item there exists a \ul{continuous} \ul{and} \ul{bounded} function that does not achieve its maximum on $E$.
			\begin{enumerate}
				\item[(i)] $f(x) = \tan\inv x$ (assume continuity)
				\item[(ii)] $f(x) = x$, $E = (-1,1)$
				\item[(iii)] $f(x) = \frac{x^2}{1+x^2}$
			\end{enumerate}
		\item If $E$ is bounded, there exists a continuous and bounded function on $E$ which is not uniformly continuous.

			\ul{\ul{HW}}: find an example -- In the book!
	\end{enumerate}
\end{theorem}

\subsection*{Continuity and connectedness}

\begin{recall}
	$E\subset X^{m.s.}$ is a union of nonempty disjoint separated sets if $\exists A^{\neq\emptyset},B^{\neq\emptyset}\subset X$ such that $E = A\cup B$, $\conj A\cap B = \emptyset$, $A\cap\conj B = \emptyset$.
	A set $E\subset X$ is connected if it is \ul{not} a union of nonempty separated sets.
\end{recall}
$$f^{\la\text{cts}}(\text{connected}) = \text{connected}$$

\begin{theorem}
	\label{thm-4-22}
	Let $f:X\us{\text{cts}}\lra Y$ and $E\subset X$ be connected.
	Then $f(E)\subset Y$ is connected.
\end{theorem}
\begin{proof}
	Discuss in class.
\end{proof}
\begin{theorem}
	[Intermediate Value property]
	Let $f:[a,b]\us{\text{cts}}\lra\mb R$.
	If $f(a)<f(b)$ and $\exists y_0\in(f(a),f(b))$ then $\exists x_0\in(a,b)$ such that $f(x_0)=y_0$.
	\label{thm-4-23}
\end{theorem}
\begin{proof}
	Note that $[a,b]$ is connected. Then Theorem \ref{thm-4-22} implies that \ul{$f([a,b])\subset\mb R$ is connected}.
	Since $f(a),f(b)\in \us{\text{connected}}{f([a,b])}$ and $f(a)<y_0<f(b)$, $y_0\in f([a,b]) \implies \exists x_0\in(a,b)$ such that $f(x_0)=y_0$.
\end{proof}
Think about exercise 6,8,10

\ul{Test 1 on chapter 4}: $8^\text{th}$ Feb

\begin{example}
	Connectedness is important, not compactness.
	Take $E = [-2,-1]\cup[1,2]$ -- compact subset of $\mb R$.
	Define $f:E\ra\mb R$ by $f(x) = \begin{cases} -1; & -2 \leq x\leq -1 \\ 1; & 1\leq x\leq 2 \end{cases}$.
		Then $f(-2)<\os{=y_0}0<f(2) = 1$.
	But $~\exists x_0\in E$ such that $f(x_0)=0$.
\end{example}
\begin{example}
	IVP may not necessarily be satisfied by a discontinuous function.
Define $f:[-1,1]\ra\mb R$ by $f(x) = \begin{cases} -1; & -1\leq x\leq0 \\ 1; & 0<x\leq 1 \end{cases}$. $\checkmark f$ not continuous at $x=0$ and does not satisfy IVP i.e., $f(-1) < 0 < f(1)$ but $~\exists x\in(-1,1)$ such that $f(x) = 0$.
\end{example}
\begin{example}
	Converse of Theorem \ref{thm-4-23} is not true. A function may not satisfy IVP but $f$ does not need to be continuous.
	Then $f:\mb R\ra\mb R$ defined by $f(x) = \begin{cases} \sin(\frac1x); & x\neq 0 \\ 0; & x=0 \end{cases}$.
		Prove $\sin x$ is continuous, \ul{Show}: $|x\sin x|\leq |x|$ for all $x\in \mb R$.
	Use Trig identity to show $|\sin x-\sin y|\leq |x-y|$.
	\begin{enumerate}
		\item[$\checkmark$] $\sin(\frac1x)$ is continuous at $x\neq 0$.
		\item[$\checkmark$] $\sin(\frac1x)$ \ul{not} continuous at $x=0$.
	\end{enumerate}
	Take $x_n = \frac1{2\pi n+\frac\pi2}\ra0$ as $n\ra\infty$.
	But $f(x_n) = \sin\plr{1/(2\pi n+\frac\pi2)} = 1$ for all $n \implies f(x_n) = 1\ra 1\neq f(0) \implies f$ not continuous at $x=0$.
	For any $x_1,x_2\in\mb R$ and any $f(x_1)<y_0<f(x_2)$, $\exists x_0\in(x_1,x_2)$ such that $f(x_0)=y_0$.
\end{example}

\subsection*{Discontinuities (on $\mb R$)}

First goal is to classify types of discontinuities:
\begin{itemize}
	\item $\lim_{x\ra c} f(x) \neq f(c)$,
	\item $\lim_{x\ra c} f(x)$ does not exist.
\end{itemize}
\ul{Left hand limit}: $f:(a,b)\subset\mb R\ra\mb R$ and $x\in(a,b]$. Then $f(x_-) = q$ or $\ds\lim_{t\ra x_-} f(t) = q$ if and only if
\begin{enumerate}
	\item[i)] $\forall\epsilon>0,\exists\delta=\delta(x,\epsilon)>0$ such that if $x-\delta < t < x$ then $|f(t)-q|<\epsilon$.
	\item[ii)] $\forall$ sequence $(t_n)\subset(a,x)$ such that $t_n\ra x$ implies $f(t_n)\ra q$.
\end{enumerate}
Similarly $f(x_+)=q$ or $\lim_{t\ra x_+}f(t) = q$.

\begin{definition}
	A function has a discontinuity of \ul{type 1} at $x$ if $f(x_+)$ aand $f(x_-)$ exist.
	This is also called simple discontinuity.
	Otherwise it has type 2 discontinuity.
\end{definition}
\begin{example}
$f:\mb R\ra\mb R$ defined by $f(x) = \begin{cases} 1 & \text{if }x>0 \\ 0 & \text{if }x=0 \\ -1 & \text{if }x<0 \end{cases}$.
	$f$ is continuous for $x\neq0$. $f$ not continuous at $x=0$.
	Let $(x_n)\subset(0,\infty)$ such that $x_n\ra0$.
	Then $f(x_n) = 1$ for all $n$, so $f(x_n)\ra1\neq f(0)=0$.
	Simple discontinuity at $x=0$ since $f(0_-)=-1$ exists and $f(0_+)=1$. (from above)
\end{example}
\begin{example}
$f:\mb R\ra\mb R$ by $f(x) = \begin{cases} \sin\plr{\frac1x}; & x\neq0 \\ 0; & x=0 \end{cases}$.
	$\checkmark f$ not continuous at $x=0$. What type of discontinuity?
	\ul{Claim}: $f(0_+)$ does not exist.
	Find $(t_n),(q_n)\subset(0,\infty)$ such that $t_n\ra0$ and $q_n\ra0$ as $n\ra\infty$ but $\lim_{n\ra\infty}f(t_n)\neq\lim_{n\ra\infty}f(q_n)$.
	Take $t_n=\frac1{2\pi n+\frac\pi2}\implies f(t_n)=1$ for all $n \implies f(t_n)\ra1$.
	Take $q_n=\frac1{2\pi n+\frac{3\pi}2} \ra 0$ and $f(q_n) = -1$ for all $n \implies f(q_n)\ra -1$.
	This means that $f(0_+)$ does not exist.
\end{example}
\begin{example}
	$f:\mb R\ra\mb R$ by $f(x) = \begin{cases} 1 & \text{if }x\in\mb Q \\ -1 & \text{if }x\notin \mb Q \end{cases}$.
	$f$ \ul{not} continuous on $\mb R$.
	Fix $x^*\in\mb R$ and show $f$ not continuous at $x^*$.
	Using the fact that $\mb Q$ and $\mb Q^c$ are dense in $\mb R$, $\exists q_\in\mb Q$ and $t_n\in\mb Q^c$ such that $q_n\ra x^*\implies f(q_n)=1\ra 1$ and $t_n\ra x^*s \implies f(t_n)=-1\ra -1$ imply that $f$ not continuous at $x^*$.
	Discontinuity of type 2 at $x^*$.
	Show $f(x^*_+)$ does not exist.
\end{example}
Read Theorem 4.22. Example $f(x) = \begin{cases} x; & x\in\mb Q \\ 0; & x\in\mb Q^c \end{cases}$ $\checkmark$ continous at $x=0$ only.

\ul{Test material}: Chapter 4.
Definition and examples

\ul{Problems to ignore}:
\#5, \#11(b), \#13, \#23, \#24.
Undergraduates can ignore:
\#7, \#17, \#19, \#25.

\begin{example}
	[Example of a continuous function]
$f(x) = \begin{cases} x\sin\plr{\frac1x}; & x\neq 0 \\ 0; & x=0 \end{cases}$ 
	$\checkmark$ continuous for $x\neq0$ since $\frac1x$ and $\sin x$ continuous.
	Continuous at $x=0$?
	\ul{\ul{$\epsilon-\delta$}}: Fix $\epsilon>0$,
	\begin{align*}
		|f(x) - f(0)| = \mlr{x\sin\plr{\frac1x}-0} = \mlr{x\sin\plr{\frac1x}} = |x|\,\ub{\leq1}{\mlr{\sin\plr{\frac1x}}} \leq |x| < \delta = \epsilon
	\end{align*}
	implies $f$ continuous at $x=0$.
\end{example}

\begin{definition}
	[Monotone functions] $f:E\subset\mb R\ra\mb R$
\begin{enumerate}
	\item[(i)] $f$ is monotonically increasing ($\uparrow$) on $E$ if $x,y\in E$ and $x<y$ then $f(x) \leq f(y)$.
	\item[(ii)] $f$ is monotonically decreasing ($\downarrow$) on $E$ if $x,y\in E$ and $x<y$ then $f(x) \geq f(y)$.
\end{enumerate}
\end{definition}
\begin{example}
	$f(x) = 1$; $E = (a,b)$
\end{example}
\begin{example}
	$f(x) = x$; $E=\mb R$
\end{example}
\begin{example}
	$f(x) = \us{?}{e^x}$; $E=\mb R$.
\end{example}

\begin{theorem}
	Let $f:(a,b)\ra\mb R$ be \ul{\ul{$\uparrow$}}. Then
	\begin{enumerate}
		\item[(i)] $f(x_-)$ and $f(x_+)$ exist $\forall x\in(a,b)$.
			More precisely, $\ds\sup_{a<t<x} f(t) = f(x_-) \leq f(x) \leq f(x_+) = \inf_{x<t<b} f(t)$.
		\item[(ii)] If $a<x<y<b$ then $f(x_+) \leq f(y_-)$.
	\end{enumerate}
	\label{thm-4-29}
\end{theorem}
\begin{example}
$f(x) = \begin{cases} 1 & x\in(a,x_0) \\ 2 & x\in[x_0,b) \end{cases}$ with $f(x_-)=1$ and $f(x_+)=2$.
\end{example}
\begin{proof}:
	\begin{enumerate}
		\item[(i)] Let $x\in(a,b)$ be fixed. $f$ $\uparrow$ on $(a,x)$ implies $f(t) \leq f(x)$ for all $t\in(a,x)$ with $a<t<x$.
			$\implies f(x)$ is an upper bound of $f$ on $(a,x)$.
			Also, $f$ is defined on $(a,x)$ so $\sup f(t)$ exists.
			Let $A:=\sup_{t\in(a,x)} f(t)$.
			\ul{Claim}: $A:=f(x_-)\,(=\lim_{t\ra x_-}f(t))$.
			Fix $\epsilon>0$. NTS $\exists\delta>0$ such that if $x-\delta<t<x$ then $|f(t)-A|<\epsilon$.
			Note that $A:=\sup_{t\in(a,x)}f(t)$, $A-\epsilon$ is not an upper bound of $f(t)$ on $(a,x)$.
			So, $\exists\delta>0$ such that \fbox{$a<x-\delta<x$ and $A-\epsilon< f(x-\delta)\leq A\leq f(x)$} (1).
			Now, if $x-\delta<t<x$, then $f$ $\uparrow$ implies \fbox{$f(x-\delta)\leq f(t)\leq \ub{=\sup}A\leq f(x)$} (2).
			Combining (1) and (2), for $x-\delta<t<x$, 
			$$\ul{A-\delta}<f(x-\delta)\leq \ul{f(t) \leq A} \implies A-\epsilon < f(t) \leq A \implies A-\epsilon < f(t) \us{<A+\epsilon}{\leq A} \implies |f(t)-A|<\epsilon.$$
			This implies $A:= f(x_-)$ i.e., $\ds\sup_{t\in(a,x)} f(t) = f(x_-)$.
			Similarly, $\ds\inf_{t\in(x,b)}f(t) = f(x_+)$.
			Clearly, $$f(x_-)\leq f(x)\leq f(x_+).$$
		\item[(ii)] Let $a<x<y<b$. We know 
			\begin{align*}
				\begin{rcases}
				f(x_+) &= \inf_{t\in(x,b)}f(t) \os{f\uparrow}= \inf_{t\in(x,y)} f(t) \\
				f(x_-) &= \sup_{t\in(a,y)}f(t) \os{f\uparrow}= \sup_{t\in(x,y)} f(t)
				\end{rcases}
				\implies \inf_{t\in(x,y)}f(t) \leq \sup_{t\in(x,y)}f(t) \implies f(x_+) \leq f(y_-)
			\end{align*}
	\end{enumerate}
\end{proof}

\begin{theorem}
	Let $f:(a,b)\subset\mb R\ra\mb R$ be monotonic.
	Let $E:=\setc{x\in(a,b)}{f\text{ is discontinuous at }x}$.
	Then $E$ is at most countable.
\end{theorem}
\begin{proof}
	WLOG assume $f$ $\uparrow$. If $f$ is discontinuous at finitely many points, then $E$ is finite.
	\ul{Claim}: there is a 1-1 correspondence between $E$ and $\mb Q$ (countable).
	Let $x\in E$. Since $f$ $\uparrow$, the discontinuity is of first kind.
	By Theorem \ref{thm-4-29}(i) it follows that $$\us{\in\mb R}{f(x_-)} < \us{\in\mb R}{f(x_+)}.$$
	Since $\mb Q$ is dense in $\mb R$, $\exists r(x)\in\mb Q$ such that $f(x_-)<r(x)<f(x_+)$.
	It remains to show that this correspondence is 1-1 i.e., $x_1\neq x_2\implies r(x_1)\neq r(x_2)$ for any $x_1,x_2\in E$.
	Assume $x_1<x_2$ (WLOG).
	Theorem \ref{thm-4-29}(ii) implies $f(x_{1+})\leq f(x_{2-}$.
	Now, $f$ $\uparrow$ with $x_1<x_2$ implies $$f(x_{1-})<r(x_1)<f(x_{1+}) \leq f(x_{2-}) < r(x_2) < f(x_{2+}) \implies r(x_1) < r(x_2)$$ i.e., $r(x_1)\neq r(x_2)$.
	So $E$ is countable.
\end{proof}

\section*{Differentiability}

\begin{definition}
	Let $f:[a,b]\ra\mb R$ and $x\in[a,b]$.
	$f$ is differentiable at $x$ if $f'(x):=\fbox{$\ds\lim_{h\ra0} \frac{f(x+h)-f(x)}h$}$ exists \ul{\ul{or}} $\ds f'(x) = \lim_{t\ra x}\frac{f(t)-f(x)}{t-x}$.
\ul{One sided derivative}:
\begin{align*}
	\begin{rcases} f'(x_+) &= \lim_{h\ra0^+} \frac{f(x+h)-f(x)}h \\ &= \lim_{t\ra x_+} \frac{f(t)-f(x)}{t-x} \end{rcases} \text{if exists} \\
	\begin{rcases} f'(x_-) &= \lim_{h\ra0^-} \frac{f(x+h)-f(x)}h \\ &= \lim_{t\ra x_-} \frac{f(t)-f(x)}{t-x} \end{rcases} \text{if exists}
\end{align*}
$f'(x)$ exists $\iff f'(x_-)=f'(x_+)$.
\end{definition}
\begin{example}
	$f(x) = |x|$ continuous on $\mb R$, but not differentiable at $x=0$.
	Indeed,
	\begin{align*}
		\lim_{h\ra0_+} \frac{f(0+h)-\os{=0}{f(0)}}h &= \lim_{h\ra0_+} \frac{\os{=h}{|h|}}h=1 \\
		\lim_{h\ra0_-} \frac{f(0+h)-\os{=0}{f(0)}}h &= \lim_{h\ra0_-} \frac{\os{=-h}{|h|}}h=-1
	\end{align*}
	implies $f'(0)$ does not exist.
\end{example}
\begin{example}
	$f(x) = \begin{cases} x\sin\plr{\frac1x}; & x\neq 0 \\ 0; & x=0 \end{cases}$ continuous on $\mb R$.
	Is $f$ differentiable at $x=0$?
	$$f'(0) = \lim_{h\ra0}\frac{f(0+h)+\os{=0}{f(0)}}h = \lim_{h\ra0} \frac{h\sin\plr{\frac1h}}h = \lim_{h\ra0}\sin\plr{\frac1h}$$
	does not exist implies $f'(0)$ does not exist.
	\label{ex-5-1}
\end{example}
\begin{example}
	$f(x) = \begin{cases} x^2\sin\plr{\frac1x}; & x\neq0 \\ 0; & x=0 \end{cases}$.
	Is $f$ differentiable at $x=0$?
	$$f'(0) = \lim_{h\ra0} = \frac{f(h)-\os{=0}{f(0)}}h = \lim_{h\ra0} \frac{h^2\sin\plr{\frac1h}}h = 0$$
	because $x\sin\plr{\frac1x}$ is continuous at $x=0$ and $=0$ at $x=0$.
	\label{ex-5-2}
\end{example}

\begin{theorem}
	Let $f:[a,b]\ra\mb R$ and $x\in[a,b]$.
	If $f$ is differentiable at $x$, then $f$ is continuous at $x$.
\end{theorem}
\begin{recall}
	$f$ is continuous at $x$ if $\ds\lim_{t\ra x}f(t)=f(x)$.
\end{recall}
\begin{proof}
	Suppose $f$ is differentiable at $x$.
	\ul{\ul{NTS}}: $\lim_{t\ra x}f(t)=f(x)$.
	Consider $\ds f(t)-f(x) = \frac{f(t)-f(x)}{t-x}\cdot(t-x)$; $t\neq x$.
	Using limit properties and $\ds f'(x)=\lim_{t\ra x}\frac{f(t)-f(x)}{t-x}$, we get 
	$$\lim_{t\ra x} [f(t)-f(x)] = f'(x)\cdot0 \implies \lim_{t\ra x} f(t) = f(x) $$ 
	implies $f$ continuous at $x$.
\end{proof}
\begin{remark}
	The converse is not true -- see examples \ref{ex-5-1} and \ref{ex-5-2}.
\end{remark}
Properties of differentiable functions:
\begin{theorem}
	Let $f,g:[a,b]\ra\mb R$.
	Suppose $f$ and $g$ are differentiable at $x\in[a,b]$.
	Then $f+g$, $f\cdot g$ and $f/g$ ($g(x)\neq0$) are differentiable at $x$.
	Moreover,
	\begin{enumerate}
		\item[(i)] $(f+g)'(x) = f'(x)+g'(x)$
		\item[(ii)] $(fg)'(x) = f(x)\cdot g'(x)+g(x)\cdot f'(x)$
		\item[(iii)] $\ds(f/g)'(x) = \frac{g(x)\cdot f'(x)+f(x)\cdot f'(x)}{[g(x)]^2}$
	\end{enumerate}
\end{theorem}
\begin{proof}
	(ii) Let $h(t) = f(t)g(t)$.
	\ul{NTS}: $h'(x) = f(x)\cdot g'(x)+g(x)\cdot f'(x)$.
	Then $f,g$ differentiable at $x$ implies $\ds f'(x) = \lim_{t\ra x} \frac{f(t)-f(x)}{t-x}$ and $\ds g'(x) = \lim_{t\ra x} \frac{g(t)-g(x)}{t-x}$ are well defined.
	Now, for $t\neq x$
	\begin{align*}
		\frac{h(t)-h(x)}{t-x} &= \frac{f(t)g(t)-f(x)g(x)}{t-x} = \frac{f(t)g(t) - f(t)g(x)}{t-x} + \frac{f(t)g(x) - f(x)g(x)}{t-x} \\
							  &= f(t)\cdot\frac{g(t)-g(x)}{t-x} + g(x)\cdot\frac{f(t)-f(x)}{t-x}.
	\end{align*}
	Letting $t\ra x$;
	\begin{align*}
		h'(x) &= \lim_{t\ra x} f(t)\cdot \lim_{t\ra x}\frac{g(t)-g(x)}{t-x} + g(x)\cdot \lim_{t\ra x}\frac{f(t)-f(x)}{t-x} \\
			  &= f(x)\cdot g'(x)+g(x)\cdot f'(x),
	\end{align*}
	where $\lim_{t\ra x} f(t) = f(x)$ is used.
\end{proof}

\begin{proposition}
	[Power rule] $f(x) = x^n \implies f'(x) = nx^{n-1}$; $n\in\mb R$.
\end{proposition}
\begin{itemize}
	\item if $n\in\mb N$, $\checkmark$ use product rule and induction.
	\item if $n\in\mb Z$, use quotient rule $\ds\frac1{x^n}$.
	\item if $n\in\mb Q$, (assume chain rule) then $n=\frac pq$, $p,q\in\mb Z$, $q\neq 0$.
		Let $\ds y=x^{\frac pq} \implies y^q = x^p \implies qy^{q-1}\cdot y'(x) = px^{p-1}$ (chain rule) $\ds\implies y'(x) = \frac pq \frac{x^{p-1}}{y^{q-1}} = \frac pq\cdot \frac {x^{p-1}}{x^{\frac pq(q-1)}} = \frac pq\cdot \frac{x^{p-1}}{x^{p-p/q}}x^{\frac pq-1} = \frac pqx^{\frac pq-1} = nx^{n-1}=y'(x)$.
	\item if $n\in\mb R$, $f(x) = x^n = e^{\ln x^n} = e^{n\ln x}$ (assume differentiability of $e^x$ and $\ln x$) $\implies f'(x) = e^{n\ln x}\cdot \frac nx = x^n\cdot\frac nx = nx^{n-1} = f'(x)$; $n\neq0$.
\end{itemize}

\begin{theorem}
	\label{thm-5-5}
	Suppose
	\begin{itemize}
		\item $f$ continuous on $[a,b]$,
		\item $f'(x)$ exists at some $x\in[a,b]$,
		\item $g$ defined on some interval $I\supset f([a,b])$,
		\item $g$ differentiable at $f(x)$.
	\end{itemize}
	Then $g\circ f$ is differentiable at $x$ and $(g\circ f)'(x) = g'(f(x))\cdot f'(x)$.
\end{theorem}
\begin{proof}
	First, $f$ differentiable at $x$ means $\ds f'(x) = \lim_{t\ra x} \frac{f(t)-f(x)}{t-x}$ exists.
	This implies $$f(t)-f(x) = [f'(x) + u(t)](t-x),$$ where $u(t)\ra0$ as $t\ra x$.
	Then $g$ differentiable at $f(x)$ implies $\ds g'(f(x)) = \lim_{s\ra f(x)} \frac{g(s)-g(f(x))}{s-f(x)}$ exists $$\implies g(s)-g(f(x)) = [g'(f(x))+v(s)](s-f(x)),$$ where \fbox{$v(s)\ra0$ as $s\ra f(x)$}.
	\ul{\ul{NTS}}: $$\lim_{t\ra x} \frac{g(f(t))-g(f(x))}{t-x} = g'(f(x))\cdot f'(x).$$
	Finish next time.
\end{proof}
\begin{remark}
	The proof is a bit hand wavy, look for better proof.
\end{remark}
\begin{recall}
	$g(f(x))' = g'(f(x))\cdot f'(x)$.
\end{recall}
\begin{proof}
	Since $f$ is differentiable at $x$, $f'(x)=\lim_{t\ra x} \frac{f(t)-f(x)}{t-x}$ exists.
	
	So \fbox{$f(t)-f(x) = (t-x)[f'(x)+ u(t)]$, where $u(t)\ra0$ as $t\ra x$} (1).
	$g$ differentiable at $f(x)$.
	
	So \fbox{$g(s)-g(f(x)) = (s-f(x))[g'(f(x))+v(s)]$, $v(s)\ra0$ as $s\ra f(x)$} (2).

	\ul{Want to show}: $\ds\lim_{t\ra x}\frac{g(f(t))-g(f(x))}{t-x} = g'(f(x))\cdot f'(x)$.
	Using (2), for $t\neq x$ with $s=f(t)$
	$g(f(t)) - g(f(x)) = (f(t)-f(x))[g'(f(x))+v(f(t))]$, where $v(f(t))\ra0$ as $t\ra x$ since $f(t)\ra f(x)$ as $t\ra x$ by continuity of $f$.
	missing CONTENT
	\iffalse
	\begin{align*}
		g(f(t))-g(f(x))
		&\os{(1)}= (t-x)[f'(x)+u(t)][g'(f(x))+v(f(t))] \\
		&= \ub{\,}{f'(x)\cdot g'(f(x))}+f'(x)\cdot \ub{\ra0\text{ as }t\ra x}{v(f(t))} + \us{\ra0\text{as t\ra x}}{u(t)} g'(f(x)) + u(t)\us{\ra0}{v(f(t))} \ra g'(f(x))\cdot f'(x)
	\end{align*}
	\fi
	as $t\ra x$.
	Therefore $\lim_{t\ra x}\frac{g(f(t))-g(f(x))}{t-x} = g'(f(x))\cdot f'(x)$.
\end{proof}

\begin{remark}
	Rolle's theorem is a special case for the MVT for the existence of a zero slope secant line.
\end{remark}

\subsection{Mean Value Theorem}
\ul{Local max/min}: Suppose $f:X^{m.s}\ra\mb R$. We say that $f$ has a local max (min) at $x\in X$ if $\exists \delta>0$ such that $f(t)\leq (\geq) f(x)$ for all $t\in B_\delta(x)$.
\begin{theorem}
	\label{thm-5-8}
	Let $f:[a,b]\ra\mb R$. If
	\begin{itemize}
		\item $f$ has a local max (min) at $x\in(a,b)$,
		\item $f$ differentiable at $x$,
	\end{itemize}
	then $f'(x)=0$.
\end{theorem}
\begin{proof}
	We will compute $f'(x_-)$ and $f'(x_+)$.
	Since $f$ has a local maximum at $x$, $\exists\delta>0$ such that if $t\in(x-\delta,x+\delta)$ then $f(t)\leq f(x)$.

	$f'(x_-)$: Let $t\in(x-\delta,x)$. Then
	\begin{align*}
		\frac{\fbox{$f(t)-f(x)$}^{\leq 0}}{\ub{<0}{t-x}} \implies lim_{t\ra x_-} \frac{f(t)-f(x)}{t-x}\geq 0 \qquad (f'(x_-))
	\end{align*}
	$f'(x_+)$: Let $t\in(x,x+\delta)$. Then $\lim_{t\ra x_+} \frac{(f(t)-f(x))^{\leq 0}}{(t-x)^{>0}}$ ($f'(x_+)$)
	But $f'(x)$ exists, so $f'(x_+) = f'(x_-) = 0 = f'(x)$.
\end{proof}

\begin{theorem}
	[Generalized MVT]
	\label{thm-5-9}
	Let $f,g:[a,b]\ra\mb R$ be
	\begin{itemize}
		\item continuous on $[a,b]$,
		\item differentiable on $(a,b)$.
	\end{itemize}
	Then there exists $x\in(a,b)$ such that $[f(b)-f(a)]g'(x) = [g(b)-g(a)]f'(x)$.
\end{theorem}
\begin{remark}
	MVT: $\frac{f(b)-f(a)}{b-a} = f'(x)$; $x\in(a,b)$, $f(b)-f(a)=(b-a)f'(x)$.
	Standard MVT: $g(x) = x$.
	Rolle's theorem: $g(x) = x$ and $f(b)=f(a)$.
\end{remark}
\begin{proof}
	Define $h(t) = [f(b)-f(a)]g(t) - [g(b)-g(a)]f(t)$ for $t\in[a,b]$.
	Then $h$ is continuous on $[a,b]$ and differentiable on $(a,b)$.
	Also,
	\begin{align*}
		h(a) &= [f(b)-f(a)]g(a) - [g(b)-g(a)]f(a) \\
			 &= f(b)g(a)-g(b)f(a) \\
		h(b) &= [f(b)-f(a)]g(b) - [g(b)-g(a)]f(b) \\
			 &= f(b)g(a) - g(b)-f(a) = h(a)
	\end{align*}
	Now, if $h(b)=h(a)=h(t)$ for every $t\in[a,b]$, then $h'(t)=0$ for every $t\in(a,b) \checkmark$.
	Otherwise, $h(t)$ attains either a local maximum or a local minimum at some point $x\in(a,b)$.
	Then $h'(x) = 0$ by Theorem \ref{thm-5-8} i.e., $[f(b)-f(a)]g'(x) = [g(b)-g(a)]f'(x)$.
\end{proof}

\begin{theorem}
	[Derivative and monotonicity]
	\label{thm-5-11}
	Suppose $f:[a,b]\ra\mb R$ continuous and differentiable on $(a,b)$. Then
	\begin{enumerate}
		\item[(i)] if $f'(x)\geq0$ for all $x\in(a,b)$ then $f$ is monotonically increasing on $(a,b)$,
		\item[(ii)] if $f'(x)\leq0$ for all $x\in(a,b)$ then $f$ is monotonically decreasing on $(a,b)$,
		\item[(iii)] if $f'(x)=0$ for all $x\in(a,b)$ then $f$ is constant. 
	\end{enumerate}
\end{theorem}
\begin{proof}
	(i) Suppose $x_1,x_2\in(a,b)$ with $x_1<x_2$.
	\ul{\ul{NTS}}: $f(x_1)\leq f(x_2)$ if \ul{$f'(x)\geq0$}.
	By applying MVT on $[x_1,x_2]$, $\exists x\in(x_1,x_2)$ such that $\us{\geq0}{f'(x)} = \frac{f(x_2)-f(x_1)}{(x_2-x_1)^{>0}} \implies f(x_2)-f(x_1)\geq0$ i.e., $f(x_1)\leq f(x_2)$.
\end{proof}
\begin{example}
	Examples of functions $f$: Derivative exists but Derivative not continuous.
\end{example}

\begin{theorem}
	[Intermediate value property for derivative]
	\label{thm-5-12}
	Suppose $f:[a,b]\ra\mb R$ is differentiable and $\exists\lambda$ such that $f'(a)<\lambda<f'(b)$.
	Then $\exists x\in(a,b)$ such that $f'(x)=\lambda$.
\end{theorem}
\begin{note}
	$f'$ exists $\not\implies f'$ continuous, therefore IVT for continuous function cannot be applied.
\end{note}

\ul{Homework} (1) $f(x) = \frac1x$ is continuous on $(0,\infty)$ using $\epsilon-\delta$ definition??

\begin{recall}
	[IVP for $f'$]
	Suppose $f:[a,b]\ra\mb R$ differentiable, and $f'(a)<\lambda<f''(b)$ ($f'(a)\neq f'(b)$). Then $\exists x_0\in(a,b)$ such that $f'(x_0) = \lambda$.
\end{recall}
\begin{proof}
	Define $h(x) = f(x)-\lambda x$ for $x\in[a,b]$.
	Then $h$ is differentiable on $[a,b]$ since $f$ is. Also $h'(x) = f'(x)-\lambda$.
	Then $h'(a) = f'(a)-\lambda<0$ and $h'(b)=f'(b) - \lambda >0$.
	(We do not know if $f'(x)$ is continuous, so IVT for continuous functions cannot be applied.)
	Therefore there exists a point $x\in(a,b)$ where $h$ achieves a local minimum.
	Since $h$ is differentiable, $f'(x)=0$ or $f'(x) = \lambda$.
\end{proof}
\begin{corollary}
	Suppose $f:[a,b]\ra\mb R$ is differentiable. Then $f'$ cannot have any simple discontinuity.
\end{corollary}
\begin{proof}
	[Homework (proof)]
	By contradiction. Suppose $f'$ is discontinous at $x\in(a,b)$.

	\ul{Case I}: Let $f'(x_-) = f'(x_+) < f'(x)$ WLOG.
	\ul{Case II}: Let $f'(x_-)<f'(x_+)$ WLOG.
\end{proof}
\begin{corollary}
	Let $f:I\subset\mb R\ra\mb R$ \ul{have bounded derivative}. Then $f$ is uniformly continuous on $\mb R$.
\end{corollary}
\begin{proof}
	$f$ has bounded derivative on $I$, so  $\exists M>0$ such that $|f'(x)|\leq M$ for all $x\in I$.
	Let $\epsilon>0$. \ul{\ul{NTS}} $\exists\delta>0$ such that $\forall x,y\in I$ such that $|x-y|<\delta$ implies $|f(x)-f(y)|<\epsilon$.
	By MVT, $\exists c\in(x,y)$ (WLOG) such that $f(x)-f(y) = f'(c)(x-y)$ implies
	\begin{align*}
		|f(x)-f(y)| = |f'(c)|\,|x-y|
					\leq M|x-y|
					< \epsilon
	\end{align*}
	if $|x-y|<\delta=\frac\epsilon M$.
	Therefore $f$ is uniformly continuous on $I$.
\end{proof}
\begin{example}
	$f(x) = x$ is uniformly continuous on $\mb R$ since $|f'(x)|=1$ on $\mb R$.
\end{example}
\begin{example}
	$f(x) = \sin x$ or $\cos x$ uniformly continuous on $\mb R$ since $|f'(x)| = |\sin x|$ or $|\cos x|\leq1$ on $\mb R$.
\end{example}
\begin{example}
	$f(x) = \sqrt x$ on $[1,\infty)$ -- calculate $|f'(x)|\os?\leq$ ?
\end{example}

\begin{example}
	$f:I\subset\mb R\ra\mb R$ is uniformly continuous on $I$ if and only if $\forall\epsilon>0$, $\exists\delta>0$ such that $\forall x,y\in I$ with $0<|x-y|<\delta$ implies $|f(x)-f(y)|<\epsilon$.

	Converse: $f$ is not uniformly continuous on $I$ if and only if $\exists \epsilon_0$ such that $\forall\delta>0$, $\exists x_0,y_0\in I$ with $|x_0-y_0|<\delta$ but $|f(x_0)-f(y_0)|\geq\epsilon$.
\end{example}
\begin{example}
	$f(x) = \frac1x$ is not uniformly continuous on $(0,1)$.
	\ul{Pick $\epsilon_0=1$}. Fix $\delta>0$ (arbitrary) such that $0<\delta<1$. Find $x_0,y_0$.
	Take $x_0=\delta,y_0=\frac\delta2$. Then $|x_0-y_0| = \frac\delta2$ and $|f(x_0)-f(y_0)| = \mlr{\frac1\delta-\frac2\delta}=\frac1\delta > 1=\epsilon_0$.
\end{example}
\begin{example}
	$f(x)=x^2$ is not uniformly continuous on $\mb R$.
	Fix $\epsilon_0=1$ and $\delta>0$.
	Let $x_0=\frac1\delta,y_0=\frac1\delta+\frac\delta2$, which implies $|x_0-y_0|=\frac\delta2<\delta$.
	Then
	\begin{align*}
		|f(x_0)-f(y_0)| = \mlr{\frac1{\delta^2} - \plr{\frac1\delta+\frac\delta2}^2} 
						= \mlr{\frac1{\delta^2} - \frac1{\delta^2} - 2\cdot\frac1\delta\cdot\frac\delta2 - \frac{\delta^2}4}
		= 1 + \frac{\delta^2}4 > 1 = \epsilon_0.
	\end{align*}
\end{example}

\subsection*{Higher order derivatives}

\begin{example}
	$f(x) = \begin{cases} \sin\plr{\frac1x}; & x\neq 0 \\ 0; & x=0 \end{cases}$.
	\begin{itemize}
		\item[$\checkmark$] continuous at $x\neq 0$. 
		\item[?] $x=0$ $\lim_{x\ra0} f(x) = $ \ul{does not} exist $\implies$ not continuous at $x=0$.
	\end{itemize}
	Note $\lim_{x\ra c}f(x) = L$ if and only if $\forall$ sequences $(x_n)\subset\mb R$ such that $x_n\ra c$ implies $f(x_n)\ra L$.

	Then $x_n = \frac1{2\pi n}\ra 0$ and $f(x_n) =\sin(2\pi n) = 0$ for all $n$, so $\ra0$.
	Also $y_n = \frac1{2\pi n+\frac\pi2} \ra 0$ and $f(x_n) = \sin(2\pi n+\frac\pi2)=1$ for all $n$, so $\ra1$.
	This implies $\lim_{x\ra 0}f(x)$ does not exist.
\end{example}

\newpage

\begin{theorem}
	[Taylor's theorem (Calculus version)]
	Suppose $f$ has $(n+1)$-continuous derivatives on an open interval containing $a\in I\subset\mb R$.
	Then for each $x\in I$,
	$$f(x) = \us{n^\text{th}\text{ degre polynomial}}{\sum_{k=0}^\infty \frac{f^{(k)}}{k!}(x-a)^k} + R_{n+1}(x),$$
	where $\ds R_{n+1}(x) := \frac{f^{(n+1)}(z}{(n+1)!}(x-a)^{n+1}$ for some $z$ between $a$ and $x$.
\end{theorem}
\ul{Notation}: (function space) 
\begin{align*} 
	\set{f:[a,b]\ra\mb R\text{ continuous}} &= C([a,b]), \\
	\set{f:[a,b]\ra\mb R\text{ such that }f'\text{ is continuous}} &= C^1([a,b]), \\
	\vdots \\
	\set{f:[a,b]\ra\mb R\text{ such that}f^{(k)}\text{ is continuous}} &= C^k([a,b]),
\end{align*}
where $C([a,b]) \subset C^1([a,b]) \subset \dots \subset C^k([a,b])$.

\begin{example}
	$\ds e^x = 1+x+\frac{x^2}{2!} + \frac{x^3}{3!} + \dots = \sum_{k=0}^\infty \frac{x^k}{k!}$ -- $\ub{\text{Mclaurin series}}{\text{Taylor series at }a=0}$

	$\ds R_{n+1}(x) := \frac{f^{(n+1)}(c)}{(n+1)!} x^{n+1}$ for some $c$ between and $0$ and $x$.
	?$R_{n+1}(x) \ra 0$ as $n\ra\infty$ (ratio test).

	$\ds\sum_{k=0}^\infty \frac{x^k}{k!}$ converges by Ratio test: $\ds\lim_{k\ra\infty} \frac{|x|^{k+1}}{(k+1)!} \cdot \frac{k!}{|k|^k} = \lim_{k\ra\infty} \frac{|x|}{k+1} = 0 < 1$ for all $x\in\mb R$.
	$\ds\lim_{n\ra\infty} \frac{x^{n+1}}{(n+1)!}=0$ and $|f^{(n+1)}(c)| = e^c$ is bounded for $c$ between $0$ and $x$: $\implies R_{n+1} \ra 0$ as $n\ra\infty$.
\end{example}

\begin{theorem}
	[Taylor's theorem]
	\label{thm-5-15}
	Let $f:[a,b]\ra\mb R$. Suppose
	\begin{itemize}
		\item $f^{(n-1)}$ continuous on $[a,b]$,
		\item $f^{(n)}$ exists $\forall t\in(a,b)$.
	\end{itemize}
	Let $\alpha,\beta\in[a,b]$ and define
	$$P(t) := \sum_{k=0}^{n-1} \frac{f^{(k)}(\alpha)}{k!}(t-\alpha)^k.$$
	Then $\exists x$ between $\alpha$ and $\beta$ such that $$ f(\beta) = P(\beta) + \ub{\text{Lagrange Remainder (1797)}}{\frac{f^{(n)}(x)}{n!}(\beta-\alpha)^n} .$$
\end{theorem}
\begin{proof}
	WLOG assume $\alpha\neq\beta$. Define $M:= \frac{f(\beta)-P(\beta)}{(\beta-\alpha)^n}$.
	Define $g(t) = f(t) - P(t) - M(t-\alpha)^n$; $a\leq t\leq b$.
	$$P(t) = f(\alpha) + f'(\alpha)(t-\alpha) + \frac{f''(\alpha)}{2!}(t-\alpha)^2 + \dots + \frac{f^{(n-1)}(\alpha)}{(n-1)!}\cdot(t-\alpha)^{n-1}.$$
	\begin{enumerate}
		\item[$\checkmark$] $g^{(n-1)}$ continuous on $[a,b]$ and $g^{(n)}$ exists $\forall t\in[a,b]$.
		\item[]
	$g(\alpha) = f(\alpha)-P(\alpha)-M\cdot0 = 0$ since ($f(\alpha)=P(\alpha)$).
\item[] 
	$g'(\alpha) = f'(\alpha)-P'(\alpha)) - n\cdot M\cdot 0$.
\item[] $\vdots$
\item[] $g^{(n-1)}(\alpha) = f^{(n-1)}(\alpha)-P^{(n-1)}(\alpha) - n!M\cdot0$.
	\end{enumerate}
	$\implies$ \fbox{$g^{(k)}(\alpha)=0$ for $k=0,\dots,n-1$.}
	Now, 
	\begin{align*}
		g(\beta) &= f(\beta)-P(\beta)-M(\beta-\alpha)^n 
				 = f(\beta)-P(\beta)-\frac{f(\beta)-P(\beta)}{(\beta-\alpha)^n}(\beta-\alpha)^n
	\end{align*}
	We have: $g(x) = 0$ and $g(\beta)=0$.
	$\os{\text{Rolle's}}\implies \exists x_1$ between $\alpha$ and $\beta$ such that $g'(x_1)=0$.
	Again, $g'(\alpha) = 0$ and $g'(x_1) = 0 \os{\text{Rolle's}}\implies \exists x_2$ between $x_1$ and $\alpha$ such that $g''(x_2)=0$.
	Inductively, $\exists x_n$ between $x_{n-1}$ and $\alpha$ such that $\ds g^{(n)}(x_n) = 0 \implies f^{(n)}(x_n)-\ub{=0}{P^{(n)}(x_n)} - M\cdot n!=0\implies M = \frac{f^{(n)}(x_n)}{n!} \implies \frac{f(\beta)-P(\beta)}{(\beta-\alpha)^n} = \frac{f^{(n)}(x_n)}{n!}$.	
\end{proof}

\begin{theorem}
	[Inverse function theorem]
	Suppose
	\begin{itemize}
		\item $f:(a,b)\ra(c,d)$ is differentiable
		\item $f$ is surjective
		\item $f'(x)\neq0$ for all $x\in(a,b)$
	\end{itemize}
	Then
	\begin{enumerate}
		\item[$*$] $f$ is a homeomorphism
		\item[$*$] $f\inv$ is differentiable on $(c,d)$, and
		\item[$*$] $(f\inv)'(y) = \frac1{f'(f\inv(y))}$.
	\end{enumerate}
	i.e., $f$ is a \ul{diffeomorphism}.
\end{theorem}
\begin{example}
	$f(x) = \sin x$; $(-\frac\pi2,\frac\pi2)$.
	$f'(x) = \cos x$, $f\inv(x) = \sin\inv x$.
	$$ (f\inv)'(x) = \frac1{f'(f\inv(x))} = \frac1{\cos(\sin\inv x)} = \frac1{\sqrt{1-[\sin(\sin\inv x)]^2}} = \frac1{\sqrt{1-x^2}}.$$
\end{example}
\begin{example}
	$f(x) = e^x$; $(-\infty,\infty)$.
	$f'(x) = e^x$, $f\inv(x)=\ln x$; $(0,\infty)$.
	$$(f\inv)'(x) = \frac1{f'(f\inv(x))} = \frac1{e(\ln x)} = \frac1x.$$
\end{example}

$C_0([a,b]) = \setc{f:[a,b]\os{\text{cts}}{\lra}\mb R}{f(a)=0,\,f(b)=0}$.

\begin{recall}
	[Inverse function theorem in $\mb R$]
Suppose
\begin{itemize}
	\item $f:(a,b)\ra(c,d)$ is differentiable
	\item $f$ is surjective
	\item $f'(x)\neq0$ for all $x\in(a,b)$
\end{itemize}
Then
\begin{enumerate}
	\item[\#] $f$ is a homeomorphism
	\item[\#] $f\inv$ is differentiable on $(c,d)$
		
		$(f\inv)'(y) = \frac1{f'(f\inv(y))}$.
\end{enumerate}
\end{recall}
\begin{proof}
	WLOG assume $f'>0$ on $(a,b)$.
	First we will show that $f$ is injective.
	Let $a<t<s<b$ (i.e., $t\neq s$ WLOG). By MVT, $\exists x\in(t,s)$ such that $f(s)-f(t) = \ub{>0}{f'(x)}\ub{>0}{(s-t)} \implies f(s)>f(t) \implies f$ is injective.
	Then $f$ differentiable on $(a,b) \implies f$ continuous on $(a,b) \implies f$ is a homeomorphism ($f$~bijective, $f$~continuous $\implies f\inv$ continuous).
	Now show $f\inv$ is differentiable and $(*)$ holds.
	Note that $f$ differentiable on $(a,b)$, so for $t\neq x$ $$f'(x)=\lim_{t\ra x} \frac{\ob{\neq0}{f(t)-f(x)}}{\ub{\neq0}{t-x}}$$ holds.
	This implies $$ \frac1{f'(x)} = \lim_{t\ra x} \frac{t-x}{f(t)-f(x)}; \qquad x\in(a,b). \qquad - (1) $$
	Fix $\epsilon>0$. \ul{\ul{NTS}}: $\exists\eta>0$ such that $\forall s\in(c,d)$ with $$|s-y|<\eta \implies \mlr{\frac{f\inv(s)-f\inv(y)}{s-y} - \frac1{f'(x)}} < \epsilon,$$ where \fbox{$y=f(x)$}.
	For fixed $\epsilon>0$, (1) implies that $\exists\delta>0$ such that $\forall t\in(a,b)$ with $|t-x|<\delta$,
	\begin{align*}
		\mlr{\frac{t-x}{f(t)-f(x)}-\frac1{f'(x)}} < \epsilon \qquad -(2)
	\end{align*}
	By using the continuity of $f\inv$, $\exists\eta>0$ such that $\forall s\in (c,d)$ with $|s-y|<\eta$, $|f\inv(s)-f\inv(y)|<\delta$.
	For $s\in(c,d)$ with $|s-y|<\eta$, using (2)
	\begin{align*}
		\mlr{\frac{f\inv(s)-x}{f(f\inv(s))-f(x)}-\frac1{f'(x)}} &< \epsilon, \qquad \fbox{$y=f(x)$} \\
		\implies \mlr{\frac{f\inv(s)-f\inv(y)}{s-y}-\frac1{f'(x)}} &<\epsilon. \\
		\implies \lim_{s\ra y} \frac{f\inv(s)-f\inv(y)}{s-y} = \frac1{f'(x)} &= \fbox{$(f\inv)'(y)$}.
	\end{align*}
\end{proof}

\subsection*{Vector-valued function}

$\vf:[a,b]\subset\mb R\ra\mb R^k$,
$\vf(t) = (\us{\in\mb R}{f_1(t)},\us{\in\mb R}{f_2(t)},\dots,\us{\in\mb R}{f_k(t)})\in\mb R^k$

\begin{example}:
	\begin{enumerate}
		\item $\vf(t) = (\cos t,\sin t)$ -- unit circle
		\item $\vf(t) = (\cos t,\sin t,t)$ -- helix
		\item $\vf(t) = \cos t+i\sin t$
	\end{enumerate}
\end{example}
Vector-valued functions enjoy similar (continuity).

Differentiability: 
\begin{enumerate}
	\item[$\checkmark$] $\vf$ is differentiable if and only if $f_i$ is differentiable for each $i=1,\dots,k$.
	\item[$\checkmark$] $\vf+\vg$ differentiable if $\vf+\vg$ are.
	\item[$\checkmark\checkmark$] $\vf\cdot\vg$ (inner product) is differentiable if $\vf$ and $\vg$ are.
\end{enumerate}
\ul{Caution}: MVT and $\ob{\text{book! (example)}}{\text{L'Hospital's}}$ rule may not necessarily hold.
\begin{example}
	$f(x) = e^{ix} = \cos x+i\sin x$; $[0,2\pi]$
	\begin{enumerate}
		\item[$\checkmark$] $f(0) = 1 = f(2\pi)$
		\item[$\checkmark$] $f$ differentiable
		\item[$\checkmark$] $|f'(x)| = |ie^{ix}|=1\neq0\implies f'(x)\neq0$ for all $x\in(0,2\pi)$.
	\end{enumerate}
\end{example}

\subsection*{Mean Value Theorem estimate}

\begin{theorem}
	\label{thm-5-19} Suppose
	\begin{itemize}
		\item $\vf:[a,b]\ra\mb R^k$ continuous,
		\item $\vf$ differentiable on $(a,b)$.
	\end{itemize}
	Then $\exists x\in(a,b)$ such that $|\vf(b)-\vf(a)|_{\mb R^k} \leq (b-a) (\vf'(x))_{\mb R^k}$.
\end{theorem}
\begin{proof}
	Define $g(t) = \ub{\in\mb R}{(\ob{\in\mb R^k}{\vf(t)-\vf(b)})\cdot\ob{\in\mb R^k}{\vf(t)}}$; $t\in[a,b]$.
	Then
	\begin{enumerate}
		\item[$\checkmark$] $g$ continuous on $[a,b]$
		\item[$\checkmark$] $g$ differentiable on $[a,b]$
	\end{enumerate}
	by hypothesies on $\vf$.
	By MVT, $\exists x\in(a,b)$ such that \fbox{$(b-a)g'(x)=g(b)-g(a)$} -- (1).
	Now, 
	\begin{align*}
		g(b)-g(a) &= (\vf(b)-\vf(a))\cdot\vf(b) - (\vf(b)-\vf(a))\cdot\vf(a) \\
				  &= (\vf(b)-\vf(a))\os{\downarrow\text{IP}}\cdot(\vf(b)-\vf(a)) \\
				  &= |\vf(b)-\vf(a)|_{\mb R^k}^2, \qquad (|\vx|^2=\vx\cdot\vx)
	\end{align*}
	Also, $g'(x) = (\vf(b)-\vf(a)) \cdot \vf'(x)$.
	Plugging into (1), we get 
	\begin{align*}
		|\vf(b)-\vf(a)|_{\mb R^k}^2 &= |(\vf(b)-\vf(a))\cdot \vf'(x)(b-a)|_{\mb R} \\
									&= |(\vf(b)-\vf(a))\cdot\vf(x)|(b-a) \\
									&\os{\text{C.S.}}\leq |\vf(b)-\vf(a)|_{\mb R^k}\cdot |\vf'(x)|_{\mb R^k}(b-a),
	\end{align*}
	which implies $|\vf(b)-\vf(a)|\leq(b-a)|\vf(x)|_{\mb R^k}$.
\end{proof}

\iffalse
\begin{example}
	[HW \#4.2]
	$f:[0,\infty)\ra\mb R$ is: $\dots$.
	Show, $g(x) = \frac{f(x)}x$ is monotonically increasing.
\end{example}
\begin{proof}
	Consider $f:[0,\infty)\ra\mb R$ is a continuous function with the given properties.
	Since $f$ is differentiable on $(0,\infty)$, $\exists t\in(0,x)$, $x<\infty$ such that $\frac{f(x)-f(0)}x = f'(t)$ -- (I) by MVT.
	Likewise for the interval $(x,y)$, $y<\infty$, $\exists s$ such that $f'(s) = \frac{f(y)-f(x)}{y-x}$ -- (II).
	So, $s>t$ and by monotonicity of $f'$, $$f'(s)\geq f'(t) \implies \frac{f(y)-f(x)}{y-x} \geq \frac{f(x)}x. $$
	$xf(y) - xf(y) \geq (y-x) f(x) \implies xf(y) \geq y(f(x)$.
	Clai $g(x) = \frac{f(x)}x$ is differentiable: $f(x)$ is differentiable and $I_x$ is differentiable.
	This implies $\frac{f(x)}x$ is differentiable; $x\neq0$.
	So, use MVT on $g(x) = \frac{f(x)}x$ to see, $\exists k\in(x,y)$ such that $g'(k) = \frac{g(y)-g(x)}{y-x} = \frac{\frac{f(y)}y-\frac{f(x)}x}{y-x} = \frac{xf(y)-yf(x)}{xy(y-x)}\geq0$ implies $g(x)$ is monotonic.
\end{proof}
\fi

\section*{Chapter 6: (Riemann-Stieltjes Integral)}

\begin{enumerate}
	\item[$\checkmark$] Riemann Integral (Integral Calculus)
	\item[$\checkmark\checkmark$] Riemann-Stieltjes integral (more general than Riemann Integral)
	\item[$(*)$] Lebesgue integral (measure theory)
\end{enumerate}
\ul{Assume}: $f:[a,b]\ra\mb R$ is bounded $\implies \exists m,n\in\mb R$ such that $\ds m:=\inf_{[a,b]} f(x)$ and $\ds M:=\sup_{[a,b]}f(x) \implies m(b-a) \leq M(b-a)$.
Partition $P$ of $[a,b]$: $a=x_0\leq \ub{\ul{\ul{n-1}}\text{ partition points}}{x_1\leq\dots\leq x_{n-1}}\leq x_n=b$ with \fbox{$\Delta x_i=x_i-x_{i-1}\geq0$}.
$f$ bounded on $[a,b]\implies f$ bounded on $[x_{j-1},x_j]$; $j=1,\dots,n$.

Define $\ds m_j := \inf_{[x_{j-1},x_j]}f(x)$ and $\ds M_j:=\sup_{[x_{j-1},x_j]}f(x)$.
Clearly $m_j\leq M_j$ for each $j=1,\dots,n$.
\newpage
Then for given $P$ and $f$ on $[a,b]$,
\begin{enumerate}
	\item[] $\ds L(P,f) = \sum_{i=1}^n m_i\Delta x_i$ -- lower Riemann sum,
	\item[] $\ds U(P,f) = \sum_{i=1}^n M_i\Delta x_i$ -- upper Riemann sum.
\end{enumerate}
Clearly, \fbox{$L(P,f)\leq U(P,f)$}.

Uppwer and lower Riemann integrals:
\begin{enumerate}
	\item[] $_-\int_a^b f\,dx := \ds\sup_{P\in\ms P} L(P,f)$ -- lower Riemann integral,
	\item[] $^-\int_a^b f\,dx := \ds\inf_{P\in\ms P} U(P,f)$ -- uppper Riemann integral,
\end{enumerate}
where $\sup$ and $\inf$ are taken over \ul{all partitions $P$} of $[a,b]$ and $\ms P := $ set of all partitions of $[a,b]$.

\begin{lemma}
	$ _-\int_a^bf\,dx\leq\, ^-\int_a^bf\,dx$.
\end{lemma}
\begin{proof}
	Let $P$ and $P_1$ be any two partitions of $[a,b]$. Then $m(b-a)\os\checkmark\leq L(P_1,f) \os\checkmark\leq U(P,f) \os\checkmark\leq M(b-a)$.
	Since $P_1$ is arbitrary, $\ds m(b-a)\leq L(P_1,f) \leq \inf_{P\in\ms P} U(P,f)$.
	Repeating the argument, $$\ds m(b-a)\leq \sup_{P\in\ms P} L(P,f) \leq \inf_{P\in\ms P} U(P,f) \leq M(b-a).$$
	Claim follows by definition.
\end{proof}

\begin{definition}
	[Riemann integral]
	$f:[a,b]\ra\mb R$ bounded is Riemann integrable if $_-\int_a^bf\,dx =\, ^-\int_a^b f\,dx$.
	\ul{Notation}: $\ms R = $ set of all Riemann integrable functions. 
	$$L^1([a,b]) = \setm{f:[a,b]\ra\mb R}{f\in\mb R\text{ and }||f||_{L^1}:=\int_a^b|f|\,dx.}.$$
\end{definition}
Riemann-Stieltjes integral:
\begin{enumerate}
	\item[$\checkmark$] $f:[a,b]\ra\mb R$ bounded,
	\item[] $\alpha:[a,b]\ra\mb R$ monotonically increasing ($\alpha(x)=x$ is the case for Riemann integral),
	\item[] $P:a=x_0\leq x_1\leq\dots\leq x_n=b$ a partition of $[a,b]$.
\end{enumerate}
Then $\Delta \alpha_i = \alpha(x_i)-\alpha(x_{i-1})\geq 0$ for all $i=1,\dots,n$.
Consider,
\begin{align*}
	\begin{rcases} U(P,f,\alpha) := \sum_{i=1}^n M_i\Delta\alpha_i \\ L(P,f,\alpha) := \sum_{i=1}^n m_i\Delta \alpha_i \end{rcases} \implies L(P,f,\alpha)\leq U(P,f,\alpha)
\end{align*}
since $M_i\geq m_i$, $\Delta\alpha_i\geq0$; $i=1,\dots,n$.
Define $_-\int_a^b f\,d\alpha := \ds\sup_{P\in\ms P} L(P,f,\alpha)$ and $^-\int_a^b f\,d\alpha := \ds\inf_{P\in\ms P} U(P,f,\alpha)$.
\begin{definition}
	[Riemann Stieltjes integral] $f$ is Riemann-Stieltjes integral if $_-\int_a^bf\,d\alpha =\, ^-\int_a^bf\,d\alpha$, where $\ms R(\alpha) = $ set of all Riemann-Stieltjes integrable functions.
\end{definition}
\begin{remark}
	For a uniform partition, $\Delta x = \frac{b-a}n$ and $x_k = a+k\cdot\Delta x$.
\end{remark}

Refinement of a partition $P:a=x_0\leq \dots\leq x_n=b$ is another partition $P^*$ such that $P^*\supset P$.
Common refinement: $P^*$ is a common refinement of two partitions $P_1$ and $P_2$ if $P^* = P_1\cup P_2$.
\begin{theorem}
	If $P^*$ is a refinement of $P$, then 
	\begin{enumerate}
		\item[] $L(P,f,\alpha) \leq L(P^*,f,\alpha)$ --- (1)
		\item[] $U(P,f,\alpha) \geq U(P^*,f,\alpha)$ --- (2)
	\end{enumerate}
\end{theorem}
\begin{proof}
	Let $P: a=x_0\leq \dots\leq x_n=b$ be a partition of $[a,b]$ and $P^*$ be a refinement of $P$ with \ul{just one more} point, say $x^*$.
	Assume $x_{j-1}<x^*<x_j$ for some $j=1,\dots,n$.
	Then for $x_{j-1}<x^*<x_j$ we have $\ds w_1:=\inf_{[x_{j-1},x^*]} f(x)$ and $\ds w_2:= \inf_{[x^*,x_j]} f(x)$ and $\ds m_j = \inf_{[x_{j-1},x_j]} f(x)$ imply $m_j\leq w_1$ and $m_j\leq w_2$, so that
	\begin{align*}
		L(P^*,f,\alpha) &= m_1\Delta\alpha_1 + \dots + m_{j-1}\Delta\alpha_{j-1} + \ub{j^\text{th}}{w_1\Delta\alpha^* + w_2\Delta\alpha_j} + m_{j+1}\Delta\alpha_{j+1} + \dots + m_n\Delta\alpha_n \\
		L(P,f,\alpha) &= (m_1\Delta\alpha_1 + \dots + m_n\Delta\alpha_n) \\
		L(P^*,f,\alpha)-L(P,f,\alpha) 
		&= w_1(\alpha(x^*)-\alpha(x_{j-1})) + w_2(\alpha(x_j)-\alpha(x^*)) - m_j(\ob{\Delta\alpha_j}{\alpha(x_j)-\alpha(x_{j-1})}) \\
					  &= (\ub{\geq0}{w_1-m_j})(\ub{\geq0}{\alpha(x^*)-\alpha(x_{j-1})}) + (\ub{\geq0}{w_2-m_j})(\ub{\geq0}{\alpha(x_j)-\alpha(x^*)}) \geq 0
	\end{align*}
	Repeating this process we get $L(P^*,f,\alpha)\geq L(P,f,\alpha)$. Similarly (2).
\end{proof}

\begin{recall}
	$\ds M_i = \sup_{[x_{i-1},x_i]} f(x)$, $\ds m_i = \inf_{[x_{i-1},x_i]} f(x)$, then 
	$$ \begin{rcases}U(p,f,\alpha) = \sum_{i=1}^n M_i\Delta\alpha_i \\ L(P,f,\alpha) = \sum_{i=1}^n m_i \Delta\alpha_i \end{rcases} \Delta\alpha i = \alpha(x_i)-\alpha(x_{i-1}) \geq 0$$
	With $_-\int_a^b f\,d\alpha = \ds\sup_{p\in\ms P} L(P,f,\alpha)$ and $^-\int_a^b f\,d\alpha = \ds\inf_{p\in\ms P} U(P,f,\alpha)$.
	Then $f\in\ms R(\alpha)$ if and only if $$\fbox{$_-\int_a^bf\,d\alpha = \,^-\int_a^bf\,d\alpha$.}$$
\end{recall}
\begin{theorem}
	\label{thm-6-5} $_-\int_a^bf\,d\alpha \leq\,^-\int_a^bf\,d\alpha$.
\end{theorem}
\begin{proof}
	Let $P_1,P_2$ be any two partitions of $[a,b]$. Let $P^* = P_1\cup P_2$ (common refinement).
	Then $$L(P_1,f,\alpha) \os{\text{refinement}}\leq L(P^*,f,\alpha) \leq U(P^*,f,\alpha) \os{\text{refinement}}\leq U(P_2,f,\alpha). $$
	Fix $x\in P_2$. Then $U(P_2,f,\alpha)$ is an upper bound for $L(P,f,\alpha)$ for any $P\in\ms P$.
	Then $$\ub{_-\int_a^bf\,d\alpha}{\sup_{P\in\ms P} L(P,f,\alpha)} \leq U(P_2,f,\alpha). $$
	Since $_-\int_a^bf\,d\alpha \leq U(P_2,f,\alpha)$ and $P_2\in\ms P$ is arbitrary,
	$ _-\int_a^bf\,d\alpha \leq \ds\inf_{P\in\ms P} U(P,f,\alpha)=$$\, ^-\int_a^bf\,d\alpha$
	implies $_-\int_a^bf\,d\alpha \leq ^-\int_a^bf\,d\alpha$.
\end{proof}

\begin{theorem}
	[Integrability criteria]
	\label{thm-6-6}
	$f\in\ms R(\alpha) \iff \forall\epsilon>0$, $\exists$ a partition $P=P(\epsilon)$ of $[a,b]$ such that $$U(P,f,\alpha) - L(P,f,\alpha)<\epsilon. $$
\end{theorem}
\begin{proof}
	\say{$\implies$} Suppose $\ub{_-\int_a^bf\,d\alpha\, = \, ^-\int_a^bf\,d\alpha}{f\in\ms R(\alpha)}$ and let $\epsilon>0$ be fixed.
	Since $_-\int_a^bf\,d\alpha = \ds\sup_{P\in\ms P} L(P,f,\alpha)$ and $^-\int_a^bf\,d\alpha = \ds\inf_{P\in\ms P} U(P,f,\alpha)$.
	Then $\exists P_1,P_2\in\ms P$ such that 
	\begin{enumerate}
		\item[] $_-\int_a^b f\,d\alpha - L(P_1,f,\alpha) < \frac\epsilon2$ --- (1), 
		\item[] $U(P_2,f,\alpha) -\,^-\int_a^bf\,d\alpha < \frac\epsilon2$ --- (2).
	\end{enumerate}
	Let $P^* = P_1\cup P_2$. Then $U(P^*,f,\alpha) \leq U(P_2,f,\alpha) \os{(7)}< \,^-\int_a^b f\,d\alpha + \frac\epsilon2 \os{f\in\ms R(\alpha)}= \,_-\int_a^bf\,d\alpha + \frac\epsilon2 \os{(1)}< L(P_1,f,\alpha) + \frac\epsilon2 + \frac\epsilon2 \leq L(P^*,f,\alpha) + \epsilon$.
	This implies $U(P^*,f,\alpha)-L(P^*,f,\alpha)<\epsilon$ $\checkmark$

	\say{$\Lla$} NTS: $_-\int_a^bf\,d\alpha = \,^-\int_a^bf\,d\alpha$.
	It is enough to show: for any $\epsilon>0$, $0\os\checkmark\leq \,^-\int_a^bf\,d\alpha - \,_-\int_a^bf\,d\alpha<\epsilon$.
	Let $\epsilon>0$ be fixed. Then by hypothesis, $\exists$ a partition $P$ of $[a,b]$ such that $U(P,f,\alpha)-L(P,f,\alpha)<\epsilon$.
	But $L(P,f,\alpha) \leq _-\int_a^bfd\alpha \leq \,^-\int_a^bfd\alpha \leq U(P,f,\alpha)$ implies $^-\int_a^bfd\alpha-\,_-\int_a^bfd\alpha \leq U(P,f,\alpha) - L(P,f,\alpha) < \epsilon$.
\end{proof}

\begin{theorem}
	\label{thm-6-7}
	Let $\epsilon>0$ be fixed and let $P$ be such that $U(P,f,\alpha)-L(P,f,\alpha) < \epsilon$. --- (1) Then
	\begin{enumerate}
		\item[(a)] (1) holds true for any refinement $P^*$ of $P$.
		\item[(b)] For any $s_i,t_i\in[x_{i-1},x_i]$,
			$$\ds\sum_{i=1}^n|f(s_i)-f(t_i)|\Delta\alpha_i<\epsilon.$$
		\item[(c)] For any $t_i\in[x_{i-1},x_i]$ for $i=1,\dots,n$
			$$\ds \mlr{\int_a^bf\,d\alpha - \sum_{i=1}^nf(t_i)\Delta\alpha_i} < \epsilon.$$
	\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{enumerate}
		\item[(a)] Let $P^*$ be a refinement of $P$. Then since $L(P,f,\alpha)\leq L(P^*,f,\alpha)$ and $U(P,f,\alpha) \geq U(P^*,f,\alpha)$ and $U(P,f,\alpha)-L(P,f,\alpha)<\epsilon$, we get $U(P^*,f,\alpha)-L(P^*,f,\alpha)<\epsilon$.
		\item[(b)] Clearly $f(s_i),f(t_i)\in[m_i,M_i]$ for $i=1,\dots,n$.
			That means that $|f(s_i)-f(t_i)|\leq M_i-m_i$ implies
			\begin{align*}
				\sum_{i=1}^n |f(s_i)-f(t_i)|\Delta\alpha_i 
				&\leq \sum_{i=1}^n (M_i-m_i)\Delta\alpha_i \\
				&= \sum_{i=1}^n M_i\Delta\alpha_i - \sum_{i=1}^n m_i\Delta\alpha_i \\
				&= U(P,f,\alpha) - L(P,f,\alpha) \os{(1)}<\epsilon.
			\end{align*}
		\item[(c)] Let $t_i\in[x_{i-1},x_i]$ for $i=1,\dots,n$. Then $m_i\leq f(t_i)\leq M_i$ for $i=1,\dots,n$ implies
			$$ \ub{L(P,f,\alpha)}{\sum_{i=1}^n m_i \Delta\alpha_i} \leq \sum_{i=1}^n f(t_i)\Delta\alpha_i \leq \ub{U(P,f,\alpha)}{\sum_{i=1}^n M_i\Delta\alpha_i}. $$
			Also, $\ds L(P,f,\alpha) \leq \int_a^bf\,d\alpha \leq U(P,f,\alpha) \os{(1)}\implies \mlr{\int_a^bf\,d\alpha - \sum_{i=1}^n f(t_i)\Delta\alpha_i} < \epsilon$.
	\end{enumerate}
\end{proof}

\ul{Which $f\in\ms R(\alpha)$?}
\begin{theorem}
	Let $f:[a,b]\ra\mb R$ be continuous. Then $f\in\ms R(\alpha)$ on $[a,b]$.
\end{theorem}
\begin{proof}
	Let $\epsilon>0$ be fixed. \ul{\ul{NTS}}: $\exists P\in\ms P$ of $[a,b]$ such that $U(P,f,\alpha)-L(P,f,\alpha)<\epsilon$.
	\begin{note}
		\begin{enumerate}
			\item[(i)] $\alpha:[a,b]\ra\mb R$ monotonically increasing ($\implies\alpha$ bounded), so $\exists\eta>0$ such that $[\alpha(b)-\alpha(a)]\eta<\epsilon$.
			\item[(ii)] $f$ continuous on $[a,b] \implies f$ uniformly continuous on $[a,b]$. So $\exists\delta>0$ such that $\forall x,t\in[a,b]$ with $|x-t|<\delta$ implies $|f(x)-f(t)|<\eta$.
				Let $P$ be a partition such that $\Delta x_i = x_i-x_{i-1} < \delta$ for $i=1,\dots,n$.
				Then $|f(x_i)-f(x_{i-1})| \leq M_i-m_i < \eta$ because $M_i,m_i$ are achieved on $[x_{i-1},x_i]$.
				Then 
				\begin{align*}
					U(P,f,\alpha) - L(P,f,\alpha) 
					&= \sum_{i=1}^n M_i\Delta\alpha_i - \sum_{i=1}^n m_i\Delta\alpha_i
					= \sum_{i=1}^n (\ub{<\eta}{M_i-m_i})\Delta\alpha_i \\
					&< \eta\sum_{i=1}^n \Delta\alpha_i = \eta [\alpha(x_1) - \os{=\alpha(a)}{\alpha(x_0)} + \dots + \os{=\alpha(b)}{\alpha(x_n)} - \alpha(x_{n-1})] \\
					&= \eta[\alpha(b)-\alpha(a)] < \epsilon.
				\end{align*}
		\end{enumerate}
	\end{note}
	This implies $f\in\ms R(\alpha)$ on $[a,b]$.
\end{proof}

\ul{Test 2} (Chapter 5) 1-9,11,12,13,14,15,17,22,26.
Definitions and examples.

\iffalse
\begin{example}
Show $\lim_{h\ra0} \frac{f(x+h)+f(x-h)-2\cdot f(x)}{h^2} = f''(x)$.
\end{example}
\begin{proof}
	Since $f''$ exists, both $f''(x) = \lim_{h\ra0} \frac{f'(x+h)-f'(x)}h$ and $f''(x) = \lim_{h\ra0} \frac{f'(x)-f'(x-h)}h$ exist.
	Then 
	\begin{align*}
		f''(x) &= \frac12 \lim_{h\ra0} \frac{f'(x+h)-f'(x)}h + \frac12 \lim_{h\ra0} \frac{f'(x)-f'(x-h)}h \\
			   &= \lim_{h\ra0} \frac{f'(x+h)-f'(x)+f'(x)-f'(x-h)}{2h} \\
			   &= \lim_{h\ra0} \frac{f'(x+h)-f'(x-h)}{2h}.
	\end{align*}
	Observe $\ds\lim_{h\ra0} \fbox{$\frac{f(x+h)+f(x-h)-2\cdot f(x)}{h^2}$} = \lim_{h\ra0} \frac{f'(x+h)-f'(x-h)}{2h}$ by L'hospital rule.
	So $$ f''(x) = \lim_{h\ra0} \frac{f(x+h)-f(x-h)-2f(x)}{h^2}.$$
\end{proof}
\begin{example}
	$f(x) = 3x|x| \implies f(x) = \begin{cases} -3x^2, & x<0 \\ 3x^2, & x\geq 0 \end{cases}$.
	So $f'(x) = \begin{cases} -6x, & x<0 \\ 6x, & x\geq0 \end{cases}$.
	Then $f''(x) = \begin{cases} -6, & x<0 \\ 6, & x\geq 0 \end{cases}$.
	$\lim_{h\ra0} \frac{f(h)=f(-h)-2\cdot f(0)}{h^2} = \lim_{h\ra0} \frac{3h|h|-3h|h|-0}{h^2} = 0$
\end{example}


\begin{example}
	$f(x) = \begin{cases} |x|^a \sin(|x|^{-c}), & x\neq 0 \\ 0 & x=0 \end{cases}$, $f:[-1,1]\ra\mb R$, $\sin x$ is differentiable. Suppose $a>0$, show $f$ is continuous.
\end{example}
(my proof), then Daniel's
\begin{proof}
	Since $\sin x$ is differentiable then $\sin x$ is continuous on $[-1,1]$.
	Define $|x|^a$ as $g(x) = \begin{cases} x^a; & x\geq 0 \\ -x^a; & x<0 \end{cases}$ then $g'(x) = \begin{cases} ax^{a-1}; & x\geq0 \\ -ax^{a-1}; & x<0 \end{cases}$, therefore $|x|^a$ is differentiable and also continuous at $x\neq0$.
	Fix $\epsilon>0$ and $a>0$, then
	$$ |f(x)-f(0)| = |f(x)| = \mlr{ |x|^a \sin(|x|^{-c})} = |x|^a |\sin(|x|^{-c})| \leq |x|^a.$$
	If we choose $\delta>0$ such that $\delta = \epsilon^{1/a}$ then $|f(x)-f(0)| \leq |x|^a < |\epsilon^{1/a}|^a = \epsilon$.
	Therefore, $f(x)$ is continuous at $x=0$.
\end{proof}

\begin{example}
	Prove if $f$ is continuous, then $a>0$.
	Suppose $f$ is continous on $[-1,1]$. BWOC suppose $a\leq0$. Now consider the sequence $x_n = \plr{\frac1{\frac\pi2+2\pi n}}^{1/c}$.
	Note as $n\ra\infty$, $x_n\ra0$ and since $f$ is continuous $f(x_n) \ra f(0) = 0$.
	But $f(x_n) = \plr{\frac1{\frac\pi2+2\pi n}}^{a/c}\sin\plr{\frac\pi2+2\pi  n} = \plr{\frac\pi2+2\pi n}^{-a/c}$.
	If $a=0$, then as $n\ra\infty$, $f(x_n)\ra1\neq0$ and if $a<0$, then $f(x_n)\ra\infty\neq0$. Therefore we have a contradiction. Thus $a>0$.
\end{example}

\begin{example}
	Prove $f'(0)$ exists if and only if $a>1$.

	($\implies$) Suppose $f'(0)$ exists, WTS $a>1$.
	BWOC, suppose $a\leq 1$. If $a<1$, $\lim_{h\ra0} \frac{f'(0+h)-f(0)}h = \lim_{h\ra0} \frac{|h|^a\sin(|h|^{-c})}h \ra \lim_{h\ra0} |h|^{a-1} \sin(|h|^{-c})$ implies $a-1<0$, so $\lim_{h\ra0}|h|^{a-1} \ra \infty$ is a contradiction.
	If $a=1$, 
	\begin{align*}
		\lim_{h\ra0} \frac{f(0+h)-f(0)}h &= \lim_{h\ra0} \frac{|h|\sin(|h|^{-c})}h \\
										 &= \lim_{h\ra0} \sin(|h|^{-c})
	\end{align*}
	does not exist. Contradiction, therefore $a>1$.

	($\Lla$) Suppose $a>1$, WTS $f'(0)$ exists. $\lim_{h\ra0} \frac{f(0+h)-f(0)}h = \lim_{h\ra0} \frac{|h|^a\sin(|h|^{-c})}h = \lim_{h\ra0} |h|^{a-1}\sin(|h|^{-c}) = 0 \implies f'(0) = 0$.
\end{example}

\begin{example}
	[3] By Chain rule \& product rule $$ f'(x) = \frac{|x|}x\plr{a|x|^{a-1}\sin(|x|^{-c}) - c|x|^{a-c-1} \cos(|x|^{-c})} $$ for $x\neq0$.
	WTS: by contradiction: $f'(x)$ is not bounded if $a<1+c$. 
	Let $x_n = (2n\pi+\frac\pi4)^{\frac{-1}c}$ for $n\in\mb N$.
	Then $f'(x_n) = \frac{\sqrt2}2 (ax_n^{a-1}-cx_n^{a-c-1})$ when $a<1+c$, $f'(x_n)\ra-\infty$.

	\ul{WTS}: $f'(x)$ is bounded if $a>1+c$. $|f'(x)| \leq |a|\,|x|^{a-1} + c|x|^{a-c-1}$ is bounded on $x\in[-1,1]$ if $a-1\geq0$ and $a-c-1\geq0$, $a-c-1\geq0$ impliels $a\geq 1+c$.
\end{example}
\fi

When $f\in\ms R(\alpha)$ on $[a,b]$?
\begin{enumerate}
	\item[$\checkmark$] $f$ continuous on $[a,b] \os{\text{Thm 6.8}}\implies f\in\ms R(\alpha)$ on $[a,b]$.
\end{enumerate}
\begin{recall}
	$f\in\ms R(\alpha)$ on $[a,b]$ if and only if $\forall\epsilon>0$, $\ub{a=x_0\leq\dots\leq x_n=b}{\exists P=P(\epsilon)}$ such that $U(P,f,\alpha)-L(P,f,\alpha)<\epsilon$.
	$$ \begin{rcases} U(P,f,\alpha) = \sum_{i=1}^n M_i\Delta\alpha_i \\ L(P,f,\alpha) = \sum_{i=1}^n m_i\Delta\alpha_i \end{rcases} \begin{cases} \ds M_i = \sup_{[x_{i-1},x_i]} f(x) \\ \ds m_i = \inf_{[x_{i-1},x_i]} f(x) \end{cases}, $$
	where $\Delta\alpha_i = \alpha(x_i)-\alpha(x_{i-1})\geq0$ because $\alpha$ monotonically increasing on $[a,b]$.
\end{recall}

\begin{theorem}
	Suppose
	\begin{itemize}
		\item $f$ monotonic on $[a,b]$,
	\end{itemize}
	\begin{enumerate}
		\item[$*$] $\alpha$ continuous on $[a,b]$ ($\alpha$ $\uparrow$ on $[a,b]$).
	\end{enumerate}
	Then $f\in\ms R(\alpha)$ on $[a,b]$.
\end{theorem}
\begin{proof}
	Let $\epsilon>0$ be fixed.
	\ul{\ul{NTS}}: $\exists$ a partition $P:x_0\leq x_1\leq\dots\leq x_n=b$ s.t. $U(P,f,\alpha) - L(P,f,\alpha)<\epsilon$.
		WLOG assume $f$ monotonically increasing on $[a,b]$. $(1) \begin{cases} \text{Let }N\in\mb N\text{ such that } \\ [\alpha(b)-\alpha(a)][f(b)-f(a)]<\ul{\ul{N}}\epsilon \end{cases} $.
		
		$\alpha$ continuous + monotonically increasing on $[a,b] \implies \exists a = x_0\leq\dots\leq x_N = b$ such that $\Delta \alpha_j = \alpha(x_j) - \alpha(x_{j-1}) = \frac{\alpha(b)-\alpha(a)}N$ for all $j=1,\dots,N$.
		\begin{note}
			$f$ $\uparrow$ $\implies$ $M_j = f(x_j)$ and $m_j = f(x_{j-1})$ for all $j=1,\dots,N$. Then
		\end{note}
		\begin{align*}
			U(P,f,\alpha)-L(P,f,\alpha) 
				&= \sum_{j=1}^N (M_j-m_j)\Delta\alpha_j \\
				&= \sum_{j=1}^N [f(x_j) - f(x_{j-1})]\frac{[\alpha(b)-\alpha(a)]}N \\
				&= [f(b)-f(a)]\frac{[\alpha(b)-\alpha(a)]}N \os{(1)}< \epsilon.
		\end{align*}
		$\implies f\in\ms R(\alpha)$ on $[a,b]$.
\end{proof}

\begin{theorem}
	Suppose
	\begin{itemize}
		\item $f$ is bounded on $[a,b]$,
		\item $f$ not continuous at $\theta_1,\dots,\theta_k$ in $[a,b]$.
	\end{itemize}
	\begin{enumerate}
		\item[$*$] $\alpha$ is continuous at $\theta_i$ for all $i=1,\dots,k$ ($\alpha$ $\uparrow$).
	\end{enumerate}
	Then $f\in\ms R(\alpha)$ on $[a,b]$.
\end{theorem}
\begin{proof}
	Let $\epsilon>0$ be fixed. \ul{\ul{NTS}}: $\exists P$ such that $U(P,f,\alpha)-L(P,f,\alpha)<\epsilon$.
	$\alpha$ continuous at $\theta_i$; $i=1,\dots,k \implies \exists u_i,v_i\in[a,b]$ such that 
	\begin{itemize}
		\item $\theta_i\in[u_i,v_i]$ for all $i=1,\dots,k$, and
		\item $\ds\sum_{i=1}^k \alpha(v_i) - \alpha(u_i) <\epsilon_1 = \frac\epsilon{2M+\alpha(b)-\alpha(a)}$. --- $(*)$
	\end{itemize}
	Now work with $f$: Define $G:= [a,b]\bs\bigcup_{i=1}^k(u_i,v_i) = [a,u_1]\cup[v_1,u_1]\cup\dots\cup[v_k,b]$ -- closed (finite union of closed sets) $\implies G$ is compact (closed + bounded subset of $\mb R$).
	This implies $f$ is uniformly continuous on~$G$.
	So, $\exists\delta>0$ such that $\forall x,y\in G$ with $|x-y|<\delta$, $|f(x)-f(y)|<\epsilon_1$.

	\ul{Construct $P$}: Let $n>2k$ and $a =x_0\leq\dots\leq x_n = b$ such that
	\begin{itemize}
		\item $u_i,v_i\in P$ for all $i=1,\dots,k$
		\item $t\in(u_i,v_i) \implies t\notin P$ for all $i=1,\dots,k$
		\item if for fixed $i$ $x_{i-1}\neq u_j$ for all $j=1,\dots,k$, then $\Delta x_i<\delta$

			(choose $x_i<u_j$ if $x_{i-1} < u_j$,
			choose $x_i>v_j$ if $x_{i-1}\geq v_j$)
	\end{itemize}
	$f$ bounded $\implies M=\sup|f(x)|<\infty$.
	Then \fbox{$M_i-m_i \leq 2M$} for all $i=1,\dots,n$.
	Also, if \fbox{$x_{i-1}\neq u_j$} for some $i$ and $\forall j$ then \fbox{$M_i-m_i<\epsilon_1$} (using uniform continuity since $\Delta x_i<\delta$).
	Then 
	\begin{align*}
		U(P,f,\alpha)-L(P,f,\alpha)
		&= \us{u_{i-1}=u_j\text{ for some }j}{\sum_{i=1}^n (\ob{<2M}{M_i-m_i})\Delta\alpha_i} + \us{x_{i-1}\neq u_j\ \forall j=1,\dots,k}{\sum_{i=1}^n (\ob{<\epsilon_1}{M_i-m_i})\Delta\alpha_i} \\
		&\leq 2M \us{x_{i-1}=u_j}{\sum_{i=1}^n\Delta\alpha_i} + \epsilon_1 \us{x_{i-1}\neq u_j}{\sum_{i=1}^n\Delta\alpha_i} \\
		&\os{(*)}< 2M\epsilon_1 + \epsilon_1(\alpha(b)-\alpha(a))
		= \ul{\ul{\epsilon_1}}[2M+\alpha(b)-\alpha(a)]=\epsilon>0
	\end{align*}
	since $\epsilon>0$ is arbitraty, this proves $f\in\ms R(\alpha)$ on $[a,b]$.
\end{proof}

\begin{theorem}
	Suppose
	\begin{itemize}
		\item $f\in\ms R(\alpha)$ on $[a,b]$,
		\item $m\leq f(x)\leq M$ on $[a,b]$,
		\item $\phi:[m,M]\ra\mb R$ continuous.
	\end{itemize}
	Then $h = \phi\circ f\in\ms R(\alpha)$ on $[a,b]$.
	(Assume $\alpha$ $\uparrow$ on $[a,b]$.)
\end{theorem}
\begin{proof}
	Let $\epsilon>0$ be fixed.
	\ul{NTS}: $\exists P:=x_0\leq \dots\leq x_n=b$ such that $U(P,h,\alpha)-L(P,h,\alpha) < \epsilon$.
	\begin{enumerate}
		\item $\phi$ uniformly continuous on $[m,M] \implies \exists\delta >0$ such that $x,y\in[m,M]$ with $|x-y|<\delta \implies |\phi(x)-\phi(y)|<\epsilon$.
		\item $f\in\ms R(\alpha)$ on $[a,b] \implies \exists P:=x_0\leq\dots\leq x_n=b$ such that $U(P,f,\alpha) - L(P,f,\alpha) < \dots$.
	\end{enumerate}
	Define $m_i^* = \inf_{[x_{i-1},x_i]} h(x)$ and $M_i^* = \sup_{[x_{i-1},x_i]} h(x)$.
	$f$ bounded + $\phi$ continuous $\implies h=\phi$ of $f$ is bounded on $[a,b] \implies m_i^*,M_i^*$ are well defined. $\dots$ to be continued.
\end{proof}

\end{document}
